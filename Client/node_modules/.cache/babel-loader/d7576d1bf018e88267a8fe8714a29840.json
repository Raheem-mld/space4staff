{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Delegate_$type, markType, typeCast, INotifyPropertyChanged_$type, PropertyChangedEventArgs, EventArgs, Point_$type, markDep } from \"./type\";\nimport { ISchedulableRender_$type } from \"./ISchedulableRender\";\nimport { List$1 } from \"./List$1\";\nimport { Image } from \"./Image\";\nimport { RenderingContext } from \"./RenderingContext\";\nimport { StackPool$1 } from \"./StackPool$1\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { Tile } from \"./Tile\";\nimport { Rect } from \"./Rect\";\nimport { CanvasRenderScheduler } from \"./CanvasRenderScheduler\";\nimport { WriteableBitmap } from \"./WriteableBitmap\";\nimport { Uri } from \"./Uri\";\nimport { CancellingMultiScaleImageEventArgs } from \"./CancellingMultiScaleImageEventArgs\";\nimport { DownloadingMultiScaleImageEventArgs } from \"./DownloadingMultiScaleImageEventArgs\";\nimport { CanvasViewRenderer } from \"./CanvasViewRenderer\";\nimport { truncate, intDivide, logBase } from \"./number\";\nimport { DependencyObject } from \"./DependencyObject\";\nimport { Control } from \"./Control\";\nimport { DependencyProperty } from \"./DependencyProperty\";\nimport { IEasingFunction_$type } from \"./IEasingFunction\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { TilePositionComparer } from \"./TilePositionComparer\";\nimport { Convert } from \"./Convert\";\nimport { MathUtil } from \"./MathUtil\";\nimport { PropertyMetadata } from \"./PropertyMetadata\";\nimport { stringIsNullOrEmpty } from \"./string\";\nimport { dateNow } from \"./date\";\n/**\n * @hidden\n */\n\nvar XamMultiScaleImageView =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleImageView, _super);\n\n  function XamMultiScaleImageView(a) {\n    var _this = _super.call(this) || this;\n\n    _this.b = null;\n    _this.h = null;\n    _this.g = new Dictionary$2(Base.$, List$1.$.specialize(Delegate_$type), 0);\n    _this.j = new List$1(Tile.$, 0);\n    _this.i = new List$1(Tile.$, 0);\n    _this.p = -1;\n    _this.o = -1;\n    _this.k = null;\n    _this.m = null;\n    _this.c = null;\n    _this._isDirty = false;\n    _this.au = Rect.empty;\n    _this.l = null;\n    _this.b = a;\n\n    _this.b.ag.l(_this);\n\n    _this.h = new List$1(Image.$, 0);\n\n    _this.b.ap = function () {\n      var $ret = new StackPool$1(Image.$);\n      $ret.j = runOn(_this, _this.at);\n      $ret.b = runOn(_this, _this.y);\n      $ret.c = runOn(_this, _this.aa);\n      $ret.d = runOn(_this, _this.z);\n      return $ret;\n    }();\n\n    for (var b = 0; b < 4; ++b) {\n      _this.i.add(null);\n    }\n\n    return _this;\n  }\n\n  XamMultiScaleImageView.prototype.at = function () {\n    return new Image();\n  };\n\n  XamMultiScaleImageView.prototype.y = function (a) {\n    this.h.add(a);\n  };\n\n  XamMultiScaleImageView.prototype.aa = function (a) {\n    this.h.remove(a);\n  };\n\n  XamMultiScaleImageView.prototype.z = function (a) {};\n\n  XamMultiScaleImageView.prototype.ao = function (a, b, c) {\n    a.n = b;\n    a.o = c;\n  };\n\n  XamMultiScaleImageView.prototype.r = function (a) {\n    var _loop_1 = function (b) {\n      if (a == this_1.i._inner[b]) {\n        if (a.i != null && a.i.ac != null) {\n          var c = a.i.ac;\n          var d_1 = c.c;\n          var e_1 = this_1.b.ao.w(a.f + 8, a.d, a.e);\n\n          if (e_1 != null) {\n            var f = function () {\n              var $ret = new CancellingMultiScaleImageEventArgs();\n              $ret.uri = e_1.value;\n              $ret.image = d_1;\n              return $ret;\n            }();\n\n            this_1.b.bu(f);\n          }\n\n          if (this_1.g.containsKey(d_1)) {\n            var g = this_1.g.item(d_1);\n\n            for (var h = 0; h < g.count; h++) {\n              g._inner[h]();\n            }\n\n            g.clear();\n            this_1.g.removeItem(d_1);\n          }\n        }\n\n        this_1.i._inner[b] = null;\n        this_1.q();\n        return {\n          value: void 0\n        };\n      }\n    };\n\n    var this_1 = this;\n\n    for (var b = 0; b < this.i.count; ++b) {\n      var state_1 = _loop_1(b);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    for (var i = 0; i < this.j.count; ++i) {\n      if (this.j._inner[i] == a) {\n        this.j.removeAt(i);\n        break;\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.u = function (a) {\n    this.j.add(a);\n    this.j.aa(function (b, c) {\n      var d = 0;\n      var e = 0;\n\n      if (b.h != null) {\n        d = b.h.ac.b;\n      }\n\n      if (c.h != null) {\n        e = c.h.ac.b;\n      }\n\n      if (d < e) {\n        return -1;\n      } else if (d > e) {\n        return 1;\n      }\n\n      return 0;\n    });\n    this.q();\n  };\n\n  XamMultiScaleImageView.prototype.q = function () {\n    var _this = this;\n\n    var index_ = -1;\n\n    if (this.l == null) {\n      return;\n    }\n\n    if (this.j.count > 0) {\n      for (var a = 0; a < this.i.count; ++a) {\n        if (this.i._inner[a] == null) {\n          index_ = a;\n          break;\n        }\n      }\n    }\n\n    if (index_ >= 0) {\n      this.i._inner[index_] = this.j._inner[0];\n      var b = new WriteableBitmap(this.b.ao.r, this.b.ao.p);\n      this.i._inner[index_].i.ac = b;\n      var ele_ = this.l.createElement(\"img\");\n      var c_1 = ele_.getNativeElement();\n      b.c = c_1;\n      var self_ = this;\n      var d = new List$1(Delegate_$type, 0);\n      this.g.addItem(c_1, d);\n      d.add(ele_.listen(\"load\", function (e) {\n        return _this.ab(e, index_);\n      }));\n      d.add(ele_.listen(\"readystatechange\", function (e) {\n        return _this.ab(e, index_);\n      }));\n      d.add(ele_.listen(\"error\", function (e) {\n        return _this.ac(e, index_);\n      }));\n      this.j.removeAt(0);\n      var e = this.b.ao.w(this.i._inner[index_].f + 8, this.i._inner[index_].d, this.i._inner[index_].e);\n\n      if (e == null) {\n        return;\n      }\n\n      var f_1 = e.value;\n\n      var g = function () {\n        var $ret = new DownloadingMultiScaleImageEventArgs();\n        $ret.uri = f_1;\n        $ret.image = c_1;\n        return $ret;\n      }();\n\n      this.b.bv(g);\n      f_1 = g.uri;\n\n      if (f_1 != null) {\n        c_1.src = f_1;\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ab = function (a, b) {\n    var e_ = a.originalEvent;\n    var img_ = e_.target;\n    var c = img_.complete || img_.readyState == 'complete' && e_.type == 'readystatechange';\n\n    if (c) {\n      this.downloadCompleted(a, b);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ac = function (a, b) {\n    this.downloadError(a, b);\n  };\n\n  XamMultiScaleImageView.prototype.downloadError = function (a, b) {\n    var c = this.i._inner[b];\n    this.i._inner[b] = null;\n\n    if (c != null && c.i != null && c.i.ac != null) {\n      var e_ = a.originalEvent;\n      var d = e_.target;\n\n      if (this.g.containsKey(d)) {\n        var e = this.g.item(d);\n\n        for (var f = 0; f < e.count; f++) {\n          e._inner[f]();\n        }\n\n        e.clear();\n        this.g.removeItem(d);\n      }\n    }\n\n    this.q();\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.downloadCompleted = function (a, b) {\n    var c = this.i._inner[b];\n    var d = true;\n\n    if (c != null && c.i != null && c.i.ac != null) {\n      d = false;\n      var ele_ = c.i.ac.c;\n\n      if (!ele_.complete) {\n        d = true;\n      }\n\n      if (ele_.width == 0 && ele_.height == 0) {\n        d = true;\n      }\n    }\n\n    this.i._inner[b] = null;\n\n    if (d) {\n      this.q();\n      this.ad();\n      return;\n    }\n\n    var e_ = a.originalEvent;\n    var e = e_.target;\n\n    if (this.g.containsKey(e)) {\n      var f = this.g.item(e);\n\n      for (var g = 0; g < f.count; g++) {\n        f._inner[g]();\n      }\n\n      f.clear();\n      this.g.removeItem(e);\n    }\n\n    this.b.bo(c, c.i.ac);\n\n    if (c.i != null) {\n      this.b.ca(c);\n    }\n\n    this.q();\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.a = function (a, b, c, d) {\n    var e = new WriteableBitmap(a, a);\n    e.c = b.c;\n\n    if (!b.d.isEmpty) {\n      c += truncate(Math.round(b.d.left));\n      d += truncate(Math.round(b.d.top));\n    }\n\n    e.d = new Rect(0, c, d, a, a);\n    return e;\n  };\n\n  XamMultiScaleImageView.prototype.am = function (a) {\n    a.s = 0;\n  };\n\n  XamMultiScaleImageView.prototype.an = function (a) {\n    a.s = 1;\n  };\n\n  XamMultiScaleImageView.prototype.f = function () {\n    return true;\n  };\n\n  XamMultiScaleImageView.prototype.s = function (a) {\n    if (this.b.al != null) {\n      this.b.al.deferredRefresh();\n    } else {\n      if (this.k != null) {\n        this.k.setTimeout(a, 0);\n      } else {\n        window.setTimeout(a, 0);\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.aq = function () {\n    if (this.p == -1) {\n      this.p = window.setInterval(runOn(this.b, this.b.b9), 50);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.as = function () {\n    if (this.p != -1) {\n      window.clearInterval(this.p);\n      this.p = -1;\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ap = function () {\n    if (this.o == -1) {\n      this.o = window.setInterval(runOn(this.b, this.b.br), 50);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ar = function () {\n    if (this.o != -1) {\n      window.clearInterval(this.o);\n      this.o = -1;\n    }\n  };\n\n  XamMultiScaleImageView.prototype.t = function () {\n    if (this.p != -1) {\n      this.ar();\n      this.b.by();\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ae = function (a) {\n    this.k = a;\n    this.k.rootWrapper.setStyleProperty(\"position\", \"relative\");\n    this.m = this.k.createElement(\"canvas\");\n    this.m.setStyleProperty(\"position\", \"absolute\");\n    this.m.setStyleProperty(\"top\", \"0px\");\n    this.m.setStyleProperty(\"left\", \"0px\");\n    this.k.append(this.m);\n    this.c = new RenderingContext(new CanvasViewRenderer(), this.k.get2DCanvasContext(this.m));\n    this.af(this.k.rootWrapper.width(), this.k.rootWrapper.height());\n  };\n\n  XamMultiScaleImageView.prototype.af = function (a, b) {\n    this.m.setAttribute(\"width\", truncate(a * this.b.a4).toString());\n    this.m.setAttribute(\"height\", truncate(b * this.b.a4).toString());\n    this.m.setStyleProperty(\"width\", a.toString() + \"px\");\n    this.m.setStyleProperty(\"height\", b.toString() + \"px\");\n    this.b.cn = new Rect(0, 0, 0, a, b);\n    this.b.b5();\n  };\n\n  XamMultiScaleImageView.prototype.aj = function () {\n    this.ad();\n  };\n\n  Object.defineProperty(XamMultiScaleImageView.prototype, \"index\", {\n    get: function () {\n      return 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImageView.prototype.postRender = function () {};\n\n  Object.defineProperty(XamMultiScaleImageView.prototype, \"isDirty\", {\n    get: function () {\n      return this._isDirty;\n    },\n    set: function (a) {\n      this._isDirty = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImageView.prototype.ad = function () {\n    if (this.c == null) {\n      return;\n    }\n\n    if (!this.isDirty) {\n      this.isDirty = true;\n      this.b.ag.n();\n    }\n  };\n\n  XamMultiScaleImageView.prototype.undirty = function (a) {\n    this.isDirty = false;\n    this.ak();\n  };\n\n  XamMultiScaleImageView.prototype.ak = function () {\n    if (this.c == null) {\n      return;\n    }\n\n    if (this.c.d && this.b.a4 != 1) {\n      this.c.z();\n      this.c.aa(this.b.a4, this.b.a4);\n    }\n\n    if (!this.au.isEmpty) {\n      this.c.k(this.au.left, this.au.top, this.au.width, this.au.height);\n    }\n\n    this.au = this.b.cn;\n\n    for (var a = 0; a < this.h.count; a++) {\n      var b = this.h._inner[a];\n\n      if (b.s == 0) {\n        this.al(b);\n      }\n    }\n\n    for (var c = 0; c < this.h.count; c++) {\n      var d = this.h._inner[c];\n\n      if (d.s == 1) {\n        this.al(d);\n      }\n    }\n\n    if (this.c.d && this.b.a4 != 1) {\n      this.c.y();\n    }\n\n    this.b.bt();\n    this.b.bw();\n  };\n\n  XamMultiScaleImageView.prototype.d = function () {\n    var a = true;\n\n    for (var b = 0; b < this.i.count; b++) {\n      if (this.i._inner[b] != null) {\n        a = false;\n      }\n    }\n\n    return a;\n  };\n\n  XamMultiScaleImageView.prototype.al = function (a) {\n    if (this.c == null) {\n      return;\n    }\n\n    var b = a.ac;\n    var c = a._opacity * this.b._opacity;\n\n    if (b == null || b.c == null) {\n      return;\n    }\n\n    if (this.e(b.c)) {\n      return;\n    }\n\n    if (!b.d.isEmpty) {\n      if (b.d.width < 1 || b.d.height < 1) {\n        return;\n      }\n\n      this.c.n(b.c, c, b.d.left, b.d.top, b.d.width, b.d.height, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n    } else {\n      this.c.m(b.c, c, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.e = function (a) {\n    var img_ = a;\n\n    if (!img_.complete) {\n      return true;\n    }\n\n    if (img_.width == 0 && img_.height == 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  XamMultiScaleImageView.prototype.x = function () {\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.ag = function (a) {\n    this.c = a;\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.ah = function (a) {\n    this.l = a;\n    this.q();\n  };\n\n  XamMultiScaleImageView.prototype.ai = function (a) {\n    this.b.cn = a;\n    this.b.b5();\n  };\n\n  XamMultiScaleImageView.prototype.preRender = function () {};\n\n  XamMultiScaleImageView.prototype.isValid = function () {\n    return true;\n  };\n\n  XamMultiScaleImageView.$t = markType(XamMultiScaleImageView, 'XamMultiScaleImageView', Base.$, [ISchedulableRender_$type]);\n  return XamMultiScaleImageView;\n}(Base);\n\nexport { XamMultiScaleImageView };\n/**\n * @hidden\n */\n\nvar XamMultiScaleTileSource =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleTileSource, _super);\n\n  function XamMultiScaleTileSource(a, b, c, d, e) {\n    var _this = _super.call(this) || this;\n\n    _this.t = 0;\n    _this.s = 0;\n    _this.n = 1;\n    _this.l = false;\n    _this.r = 0;\n    _this.p = 0;\n    _this.q = 0;\n    _this.j = null;\n    _this.t = a;\n    _this.s = b;\n    _this.r = c;\n    _this.p = d;\n    _this.q = e;\n    return _this;\n  }\n\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"v\", {\n    get: function () {\n      return this.t;\n    },\n    set: function (a) {\n      this.t = a;\n      this.y(0, 0, 0, 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"u\", {\n    get: function () {\n      return this.s;\n    },\n    set: function (a) {\n      this.s = a;\n      this.y(0, 0, 0, 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"o\", {\n    get: function () {\n      return this.n;\n    },\n    set: function (a) {\n      this.n = a;\n\n      if (this.k != null) {\n        this.k._opacity = this.n;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"m\", {\n    get: function () {\n      return this.l;\n    },\n    set: function (a) {\n      this.l = a;\n\n      if (this.k != null) {\n        this.k.av = this.l;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"k\", {\n    get: function () {\n      return this.j;\n    },\n    set: function (a) {\n      this.j = a;\n\n      if (this.j != null) {\n        this.j._opacity = this.o;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleTileSource.prototype.w = function (a, b, c) {\n    var d = new List$1(Base.$, 0);\n    this.x(a, b, c, d);\n    var e = null;\n\n    if (d.count > 0) {\n      e = typeCast(Uri.$, d._inner[0]);\n    }\n\n    return e;\n  };\n\n  XamMultiScaleTileSource.prototype.y = function (a, b, c, d) {\n    if (this.k != null) {\n      this.k.bs(a, b, c, d);\n    }\n  };\n\n  XamMultiScaleTileSource.$t = markType(XamMultiScaleTileSource, 'XamMultiScaleTileSource', DependencyObject.$);\n  return XamMultiScaleTileSource;\n}(DependencyObject);\n\nexport { XamMultiScaleTileSource };\n/**\n * @hidden\n */\n\nvar XamMultiScaleImage =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleImage, _super);\n\n  function XamMultiScaleImage() {\n    var _this = _super.call(this) || this;\n\n    _this.ap = null;\n    _this.an = null;\n    _this.ak = null;\n    _this.ck = null;\n    _this.a2 = 0;\n    _this.at = false;\n    _this.propertyChanged = null;\n    _this.ba = 0;\n    _this.bb = 0;\n    _this.a0 = new Date();\n    _this.cl = null;\n    _this.a3 = 0;\n    _this.ay = new List$1(Tile.$, 0);\n    _this.aw = false;\n    _this.aq = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, 0x7FFFFFFF, new TilePositionComparer());\n    _this.az = new List$1(Tile.$, 0);\n    _this.imageTilesReady = null;\n    _this.as = false;\n    _this.cn = null;\n    _this.ag = null;\n    _this.imagesChanged = null;\n    _this.downloadingImage = null;\n    _this.cancellingImage = null;\n    _this.a1 = 1;\n    _this.cn = Rect.empty;\n    _this.ag = new CanvasRenderScheduler();\n    _this.an = new XamMultiScaleImageView(_this);\n    _this.ab = XamMultiScaleImage.$;\n    _this.ck = _this.cm;\n    _this.a2 = _this.a5;\n    return _this;\n  }\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"al\", {\n    get: function () {\n      return this.ak;\n    },\n    set: function (a) {\n      if (this.ak != null) {\n        this.ak.unRegister(this);\n      }\n\n      this.ak = a;\n\n      if (this.ak != null) {\n        this.ak.register(this, runOn(this, this.b6));\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.bc = function () {\n    if (!stringIsNullOrEmpty(this.bf)) {\n      return this.bf;\n    }\n\n    return null;\n  };\n\n  XamMultiScaleImage.prototype.bd = function () {\n    if (!stringIsNullOrEmpty(this.bj)) {\n      return this.bj;\n    }\n\n    return null;\n  };\n\n  XamMultiScaleImage.prototype.bx = function (a, b, c) {\n    var d = new PropertyChangedEventArgs(a);\n\n    if (this.propertyChanged != null) {\n      this.propertyChanged(this, d);\n    }\n\n    switch (a) {\n      case XamMultiScaleImage.$$p[2]:\n        if (this.ao != null) {\n          this.ao.k = this;\n        }\n\n        this.b4();\n        this.b7();\n        this.b5();\n        break;\n\n      case XamMultiScaleImage.$$p[6]:\n        this.b8();\n        break;\n\n      case XamMultiScaleImage.$$p[7]:\n        this.b8();\n        break;\n\n      case XamMultiScaleImage.$$p[5]:\n        if (!this.ax) {\n          this.an.t();\n        }\n\n        break;\n\n      case XamMultiScaleImage.$$p[0]:\n        this.at = this.av;\n        this.b5();\n        break;\n    }\n  };\n\n  XamMultiScaleImage.prototype.v = function () {\n    _super.prototype.v.call(this);\n\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b7 = function () {\n    this.cb();\n\n    if (this.ao != null) {\n      this.ba = Convert.toInt32(logBase(this.ao.r, 2));\n      this.bb = Convert.toInt32(logBase(this.ao.v, 2));\n    }\n  };\n\n  XamMultiScaleImage.prototype.bs = function (a, b, c, d) {\n    this.b4();\n    this.b7();\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b8 = function () {\n    if (this.ax) {\n      this.a0 = dateNow();\n      this.cl = this.ck;\n      this.a3 = this.a2;\n      this.an.aq();\n    } else {\n      this.ck = this.cm;\n      this.a2 = this.a5;\n      this.b5();\n    }\n  };\n\n  XamMultiScaleImage.prototype.b9 = function () {\n    var a = 2;\n    var b = dateNow().getTime() - this.a0.getTime();\n    var c = b / 1000;\n    var d = MathUtil.b(c / a, 0, 1);\n    var e = this.aj != null ? this.aj.ease(d) : d;\n    var f = 1 - e;\n    this.a2 = this.a3 * f + this.a5 * e;\n    this.ck = {\n      $type: Point_$type,\n      x: this.cl.x * f + this.cm.x * e,\n      y: this.cl.y * f + this.cm.y * e\n    };\n\n    if (d >= 1) {\n      this.an.as();\n    } else {}\n\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.a8 = function (a, b, c, d) {\n    for (var e = 0; e < this.ay.count; ++e) {\n      if (this.ay._inner[e].c == a && this.ay._inner[e].d == b && this.ay._inner[e].e == c && this.ay._inner[e].f == d) {\n        return e;\n      }\n    }\n\n    return -1;\n  };\n\n  XamMultiScaleImage.prototype.b6 = function (a) {\n    var _this = this;\n\n    this.aw = false;\n    this.as = false;\n    var b = this.at;\n\n    if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n      return;\n    }\n\n    var c = truncate(Math.ceil(this.cn.width / this.ao.r));\n    var d = truncate(Math.max(1, Math.floor(-logBase(this.a2 / c, 2))));\n\n    if (d >= this.bb - 8) {\n      d = this.bb - 8 - 1;\n    }\n\n    var e = truncate(Math.round(Math.pow(2, d)));\n    var f = this.a2;\n    var g = this.cn.height * f / this.cn.width;\n    var h = this.ao.v / Math.pow(2, d);\n    var i = this.ao.u / Math.pow(2, d);\n    var j = truncate(Math.floor(this.ck.x * this.ao.v / h));\n    var k = truncate(Math.ceil((this.ck.x + f) * this.ao.v / h));\n    var l = truncate(Math.floor(this.ck.y * this.ao.u / i));\n    var m = truncate(Math.ceil((this.ck.y + g) * this.ao.v / i));\n\n    if (!b) {\n      j = Math.max(j, 0);\n      k = Math.min(k, e);\n    }\n\n    l = Math.max(l, 0);\n    m = Math.min(m, e);\n    var n = (j * h - this.ck.x * this.ao.v) / h;\n    var o = (l * i - this.ck.y * this.ao.u) / i;\n    var p = f * this.ao.v / h * (this.ao.r / this.cn.width);\n    var q = new List$1(Tile.$, 0);\n    var r;\n    var s;\n\n    for (var t = j; t < k; ++t) {\n      r = t;\n      s = t;\n\n      while (s < 0) {\n        s = e + s;\n      }\n\n      while (s > e - 1) {\n        s = s - e;\n      }\n\n      var _loop_2 = function (u) {\n        var v = this_2.a8(r, s, u, d);\n\n        if (v >= 0) {\n          q.add(this_2.ay._inner[v]);\n          this_2.ay.removeAt(v);\n        } else {\n          q.add(function () {\n            var $ret = new Tile();\n            $ret.c = r;\n            $ret.d = s;\n            $ret.e = u;\n            $ret.f = d;\n            return $ret;\n          }());\n        }\n      };\n\n      var this_2 = this;\n\n      for (var u = l; u < m; ++u) {\n        _loop_2(u);\n      }\n    }\n\n    this.ap.f = true;\n    this.cb();\n    this.ay = q;\n\n    var _loop_3 = function (w) {\n      if (this_3.ay._inner[w].i == null) {\n        this_3.ay._inner[w].i = this_3.ap.a();\n        this_3.ay._inner[w].i._opacity = 1;\n        this_3.an.am(this_3.ay._inner[w].i);\n        var x = this_3.am(this_3.ay._inner[w]);\n\n        if (x != null) {\n          this_3.ay._inner[w].i.ac = x;\n        } else {\n          var y = null;\n\n          var z = function () {\n            var $ret = new Tile();\n            $ret.d = _this.ay._inner[w].d;\n            $ret.e = _this.ay._inner[w].e;\n            $ret.f = _this.ay._inner[w].f;\n            return $ret;\n          }();\n\n          while (z.f >= 0 && y == null) {\n            z.d = z.d >> 1;\n            z.e = z.e >> 1;\n            z.f = z.f - 1;\n            y = this_3.am(z);\n          }\n\n          if (y != null) {\n            var aa = truncate(Math.pow(2, this_3.ay._inner[w].f - z.f));\n            var ab = intDivide(256, aa);\n            var ac = ab * (this_3.ay._inner[w].d % aa);\n            var ad = ab * (this_3.ay._inner[w].e % aa);\n            this_3.ay._inner[w].h = this_3.ap.a();\n            this_3.ay._inner[w].h._opacity = 1;\n            this_3.an.an(this_3.ay._inner[w].h);\n            x = this_3.an.a(ab, y, ac, ad);\n            this_3.ay._inner[w].h.ac = x;\n          }\n\n          this_3.an.u(this_3.ay._inner[w]);\n        }\n      }\n\n      var ae = this_3.ao.r / p;\n      var af = this_3.ao.p / p;\n      var ag = (this_3.ay._inner[w].c - j + n) * ae;\n      var ah = (this_3.ay._inner[w].e - l + o) * af;\n      this_3.ay._inner[w].i.width = ae + 0.5;\n      this_3.ay._inner[w].i.height = af + 0.5;\n      this_3.an.ao(this_3.ay._inner[w].i, ag, ah);\n\n      if (this_3.ay._inner[w].h != null) {\n        this_3.ay._inner[w].h.width = ae + 0.5;\n        this_3.ay._inner[w].h.height = af + 0.5;\n        this_3.an.ao(this_3.ay._inner[w].h, ag, ah);\n      }\n    };\n\n    var this_3 = this;\n\n    for (var w = 0; w < this.ay.count; ++w) {\n      _loop_3(w);\n    }\n\n    this.ap.f = false;\n    this.an.aj();\n  };\n\n  XamMultiScaleImage.prototype.b5 = function () {\n    if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n      return;\n    }\n\n    if (this.aw) {\n      return;\n    }\n\n    this.aw = true;\n    this.an.s(runOn(this, this.b6));\n  };\n\n  XamMultiScaleImage.prototype.cb = function () {\n    for (var a = 0; a < this.ay.count; ++a) {\n      this.an.r(this.ay._inner[a]);\n      this.bp(this.ay._inner[a]);\n\n      if (this.ay._inner[a].i != null) {\n        this.ap.n(this.ay._inner[a].i);\n        this.ay._inner[a].i.ac = null;\n        this.ay._inner[a].i = null;\n      }\n    }\n  };\n\n  XamMultiScaleImage.prototype.b4 = function () {\n    this.ar.i();\n  };\n\n  XamMultiScaleImage.prototype.am = function (a) {\n    return this.ar.item(a);\n  };\n\n  XamMultiScaleImage.prototype.bo = function (a, b) {\n    this.ar.item(a, b);\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"ar\", {\n    get: function () {\n      return this.aq;\n    },\n    set: function (a) {\n      this.aq = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.au = function () {\n    return this.az.count != 0;\n  };\n\n  XamMultiScaleImage.prototype.bt = function () {\n    var a = true;\n\n    if (this.au()) {\n      a = false;\n    }\n\n    if (!this.an.d()) {\n      a = false;\n    }\n\n    if (a && !this.as) {\n      if (this.imageTilesReady != null) {\n        this.imageTilesReady(this, new EventArgs());\n      }\n    }\n\n    this.as = a;\n  };\n\n  XamMultiScaleImage.prototype.ca = function (a) {\n    if (a.h != null) {\n      a.b = dateNow();\n      this.az.add(a);\n      this.an.ap();\n    } else {\n      this.bt();\n    }\n  };\n\n  XamMultiScaleImage.prototype.bp = function (a) {\n    if (a.h != null) {\n      this.ap.n(a.h);\n      a.h.ac = null;\n      a.h = null;\n\n      for (var b = 0; b < this.az.count; ++b) {\n        if (this.az._inner[b] == a) {\n          this.az.removeAt(b);\n          break;\n        }\n      }\n\n      if (this.az.count == 0) {\n        this.an.ar();\n      }\n    }\n  };\n\n  XamMultiScaleImage.prototype.br = function () {\n    var a = dateNow();\n    var b = 0.5;\n\n    for (var c = 0; c < this.az.count;) {\n      var d = a.getTime() - this.az._inner[c].b.getTime();\n\n      var e = d / 1000;\n      var f = e / b;\n      f = MathUtil.b(f, 0, 1);\n      this.az._inner[c].h._opacity = 1 - f;\n\n      if (f >= 1) {\n        this.ap.n(this.az._inner[c].h);\n        this.az._inner[c].h.ac = null;\n        this.az._inner[c].h = null;\n        this.az.removeAt(c);\n      } else {\n        ++c;\n      }\n\n      this.an.x();\n    }\n\n    if (this.az.count == 0) {\n      this.an.ar();\n    }\n  };\n\n  XamMultiScaleImage.prototype.by = function () {\n    this.a2 = this.a5;\n    this.ck = this.cm;\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b0 = function (a) {\n    var b = a;\n    this.ag.j(b);\n    this.an.ae(a);\n  };\n\n  XamMultiScaleImage.prototype.b1 = function (a) {\n    this.an.ag(a);\n  };\n\n  XamMultiScaleImage.prototype.b2 = function (a) {\n    this.an.ah(a);\n  };\n\n  XamMultiScaleImage.prototype.b3 = function (a) {\n    this.an.ai(a);\n  };\n\n  XamMultiScaleImage.prototype.bw = function () {\n    if (this.imagesChanged != null) {\n      this.imagesChanged(this, new EventArgs());\n    }\n  };\n\n  XamMultiScaleImage.prototype.bq = function () {\n    this.aw = false;\n  };\n\n  XamMultiScaleImage.prototype.bv = function (a) {\n    if (this.downloadingImage != null) {\n      this.downloadingImage(this, a);\n    }\n  };\n\n  XamMultiScaleImage.prototype.bu = function (a) {\n    if (this.cancellingImage != null) {\n      this.cancellingImage(this, a);\n    }\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"a4\", {\n    get: function () {\n      return this.a1;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.bz = function (a) {\n    this.a1 = a;\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"a9\", {\n    get: function () {\n      return this.ar.h;\n    },\n    set: function (a) {\n      var b = a != this.a9;\n\n      if (b) {\n        this.ar = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, a, new TilePositionComparer());\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  XamMultiScaleImage.$t = markType(XamMultiScaleImage, 'XamMultiScaleImage', Control.$, [INotifyPropertyChanged_$type]);\n  XamMultiScaleImage.$$p = markDep(DependencyProperty, PropertyMetadata, XamMultiScaleImage, 'bx', ['IsHorizontalTileWrappingEnabled:av:cc', [0, false], 'Referer:bf:cd', [2, null], 'Source:ao:ce', [XamMultiScaleTileSource.$, null], 'SpringsEasingFunction:aj:cf', [IEasingFunction_$type, null], 'UserAgent:bj:cg', [2, null], 'UseSprings:ax:ch', [0, false], 'ViewportOrigin:cm:ci', [Point_$type, {\n    $type: Point_$type,\n    x: 0,\n    y: 0\n  }], 'ViewportWidth:a5:cj', [1, 1]]);\n  return XamMultiScaleImage;\n}(Control);\n\nexport { XamMultiScaleImage };","map":{"version":3,"sources":["../../../../src/igniteui-core/lib/XamMultiScaleImageView_combined.ts"],"names":[],"mappings":"AAAA;;;;;AAKE;;AAEF,SAAS,IAAT,EAAe,KAAf,EAAsB,cAAtB,EAA4C,QAA5C,EAA8E,QAA9E,EAAgH,4BAAhH,EAAqJ,wBAArJ,EAA+K,SAA/K,EAA0L,WAA1L,EAAkP,OAAlP,QAA4Q,QAA5Q;AACA,SAA6B,wBAA7B,QAA6D,sBAA7D;AACA,SAAS,MAAT,QAAuB,UAAvB;AACA,SAAS,KAAT,QAAsB,SAAtB;AAEA,SAAS,gBAAT,QAAiC,oBAAjC;AACA,SAAS,WAAT,QAA4B,eAA5B;AACA,SAAS,YAAT,QAA6B,gBAA7B;AACA,SAAS,IAAT,QAAqB,QAArB;AACA,SAAS,IAAT,QAAqB,QAArB;AACA,SAAS,qBAAT,QAAsC,yBAAtC;AAEA,SAAS,eAAT,QAAgC,mBAAhC;AACA,SAAS,GAAT,QAAoB,OAApB;AACA,SAAS,kCAAT,QAAmD,sCAAnD;AACA,SAAS,mCAAT,QAAoD,uCAApD;AAEA,SAAS,kBAAT,QAAmC,sBAAnC;AACA,SAAS,QAAT,EAAmB,SAAnB,EAA8B,OAA9B,QAA6C,UAA7C;AACA,SAAS,gBAAT,QAAiC,oBAAjC;AACA,SAAS,OAAT,QAAwB,WAAxB;AACA,SAAS,kBAAT,QAAmC,sBAAnC;AACA,SAA0B,qBAA1B,QAAuD,mBAAvD;AACA,SAAS,UAAT,QAA2B,cAA3B;AACA,SAAS,oBAAT,QAAqC,wBAArC;AACA,SAAS,OAAT,QAAwB,WAAxB;AACA,SAAS,QAAT,QAAyB,YAAzB;AAEA,SAAS,gBAAT,QAAiC,oBAAjC;AACA,SAAS,mBAAT,QAAoC,UAApC;AACA,SAAS,OAAT,QAAwB,QAAxB;AAEA;;AAEG;;AACH,IAAA,sBAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;;AAG3C,WAAA,sBAAA,CAAY,CAAZ,EAAiC;AAAjC,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADR;;AADU,IAAA,KAAA,CAAA,CAAA,GAAwB,IAAxB;AAkBF,IAAA,KAAA,CAAA,CAAA,GAAmB,IAAnB;AAyEA,IAAA,KAAA,CAAA,CAAA,GAA2C,IAAI,YAAJ,CAAgD,IAAK,CAAC,CAAtD,EAA+D,MAAO,CAAC,CAAR,CAAU,UAAV,CAAqB,cAArB,CAA/D,EAAqG,CAArG,CAA3C;AAyDA,IAAA,KAAA,CAAA,CAAA,GAAkB,IAAI,MAAJ,CAAuB,IAAK,CAAC,CAA7B,EAAgC,CAAhC,CAAlB;AACS,IAAA,KAAA,CAAA,CAAA,GAAkB,IAAI,MAAJ,CAAuB,IAAK,CAAC,CAA7B,EAAgC,CAAhC,CAAlB;AAqFT,IAAA,KAAA,CAAA,CAAA,GAAY,CAAC,CAAb;AACA,IAAA,KAAA,CAAA,CAAA,GAAY,CAAC,CAAb;AA6BE,IAAA,KAAA,CAAA,CAAA,GAAiB,IAAjB;AACA,IAAA,KAAA,CAAA,CAAA,GAAgB,IAAhB;AACA,IAAA,KAAA,CAAA,CAAA,GAAsB,IAAtB;AA4BF,IAAA,KAAA,CAAA,QAAA,GAAoB,KAApB;AAoBE,IAAA,KAAA,CAAA,EAAA,GAAW,IAAI,CAAC,KAAhB;AA8EF,IAAA,KAAA,CAAA,CAAA,GAAiB,IAAjB;AArYP,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;;AACA,IAAA,KAAI,CAAC,CAAL,CAAO,EAAP,CAAU,CAAV,CAAY,KAAZ;;AACA,IAAA,KAAI,CAAC,CAAL,GAAS,IAAI,MAAJ,CAAwB,KAAM,CAAC,CAA/B,EAAkC,CAAlC,CAAT;;AACA,IAAA,KAAI,CAAC,CAAL,CAAO,EAAP,GAAc,YAAA;AACb,UAAI,IAAI,GAAG,IAAI,WAAJ,CAA6B,KAAM,CAAC,CAApC,CAAX;AACA,MAAA,IAAI,CAAC,CAAL,GAAS,KAAK,CAAC,KAAD,EAAO,KAAI,CAAC,EAAZ,CAAd;AACA,MAAA,IAAI,CAAC,CAAL,GAAS,KAAK,CAAC,KAAD,EAAO,KAAI,CAAC,CAAZ,CAAd;AACA,MAAA,IAAI,CAAC,CAAL,GAAS,KAAK,CAAC,KAAD,EAAO,KAAI,CAAC,EAAZ,CAAd;AACA,MAAA,IAAI,CAAC,CAAL,GAAS,KAAK,CAAC,KAAD,EAAO,KAAI,CAAC,CAAZ,CAAd;AACA,aAAO,IAAP;AACA,KAPY,EAAb;;AAQA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,CAA5B,EAA+B,EAAE,CAAjC,EAAoC;AACnC,MAAA,KAAI,CAAC,CAAL,CAAO,GAAP,CAAW,IAAX;AACA;;;AACD;;AAEO,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,WAAO,IAAI,KAAJ,EAAP;AACA,GAFO;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAR,UAAU,CAAV,EAAkB;AACjB,SAAK,CAAL,CAAO,GAAP,CAAW,CAAX;AACA,GAFO;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAmB;AAClB,SAAK,CAAL,CAAO,MAAP,CAAc,CAAd;AACA,GAFO;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAR,UAAU,CAAV,EAAkB,CACjB,CADO;;AAER,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAa,CAAb,EAAwB,CAAxB,EAAiC;AAChC,IAAA,CAAC,CAAC,CAAF,GAAM,CAAN;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,CAAN;AACA,GAHD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,UAAE,CAAF,EAAS;4BACC,C,EAAC;AACT,UAAI,CAAC,IAAI,MAAA,CAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAT,EAA2B;AAC1B,YAAI,CAAC,CAAC,CAAF,IAAO,IAAP,IAAe,CAAC,CAAC,CAAF,CAAI,EAAJ,IAAU,IAA7B,EAAmC;AAClC,cAAI,CAAC,GAAqC,CAAC,CAAC,CAAF,CAAI,EAA9C;AACA,cAAI,GAAC,GAAuC,CAAC,CAAC,CAA9C;AACA,cAAI,GAAC,GAAQ,MAAA,CAAK,CAAL,CAAO,EAAP,CAAU,CAAV,CAAY,CAAC,CAAC,CAAF,GAAM,CAAlB,EAAqB,CAAC,CAAC,CAAvB,EAA0B,CAAC,CAAC,CAA5B,CAAb;;AACA,cAAI,GAAC,IAAI,IAAT,EAAe;AACd,gBAAI,CAAC,GAAK,YAAA;AACT,kBAAI,IAAI,GAAG,IAAI,kCAAJ,EAAX;AACA,cAAA,IAAI,CAAC,GAAL,GAAW,GAAC,CAAC,KAAb;AACA,cAAA,IAAI,CAAC,KAAL,GAAa,GAAb;AACA,qBAAO,IAAP;AACA,aALQ,EAAT;;AAMA,YAAA,MAAA,CAAK,CAAL,CAAO,EAAP,CAAU,CAAV;AACA;;AACD,cAAI,MAAA,CAAK,CAAL,CAAO,WAAP,CAAmB,GAAnB,CAAJ,EAA2B;AAC1B,gBAAI,CAAC,GAAG,MAAA,CAAK,CAAL,CAAO,IAAP,CAAY,GAAZ,CAAR;;AACA,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAAC,CAAC,KAAtB,EAA6B,CAAC,EAA9B,EAAkC;AACjC,cAAA,CAAC,CAAC,MAAF,CAAS,CAAT;AACA;;AACD,YAAA,CAAC,CAAC,KAAF;AACA,YAAA,MAAA,CAAK,CAAL,CAAO,UAAP,CAAkB,GAAlB;AACA;AACD;;AACD,QAAA,MAAA,CAAK,CAAL,CAAO,MAAP,CAAc,CAAd,IAAmB,IAAnB;AACA,QAAA,MAAA,CAAK,CAAL;;;;AAEA;;;;;AA3BF,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,CAAL,CAAO,KAAnC,EAA0C,EAAE,CAA5C,EAA6C;4BAApC,C;;;AA4BR;;AACD,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,CAAL,CAAO,KAAnC,EAA0C,EAAE,CAA5C,EAA+C;AAC9C,UAAI,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,KAAoB,CAAxB,EAA2B;AAC1B,aAAK,CAAL,CAAO,QAAP,CAAgB,CAAhB;AACA;AACA;AACD;AACD,GApCD;;AAqCA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,UAAE,CAAF,EAAS;AACR,SAAK,CAAL,CAAO,GAAP,CAAW,CAAX;AACA,SAAK,CAAL,CAAO,EAAP,CAAU,UAAC,CAAD,EAAU,CAAV,EAAiB;AAC1B,UAAI,CAAC,GAAW,CAAhB;AACA,UAAI,CAAC,GAAW,CAAhB;;AACA,UAAI,CAAC,CAAC,CAAF,IAAO,IAAX,EAAiB;AAChB,QAAA,CAAC,GAAqB,CAAC,CAAC,CAAF,CAAI,EAAJ,CAAQ,CAA9B;AACA;;AACD,UAAI,CAAC,CAAC,CAAF,IAAO,IAAX,EAAiB;AAChB,QAAA,CAAC,GAAqB,CAAC,CAAC,CAAF,CAAI,EAAJ,CAAQ,CAA9B;AACA;;AACD,UAAI,CAAC,GAAG,CAAR,EAAW;AACV,eAAO,CAAC,CAAR;AACA,OAFD,MAEO,IAAI,CAAC,GAAG,CAAR,EAAW;AACjB,eAAO,CAAP;AACA;;AACD,aAAO,CAAP;AACA,KAfD;AAgBA,SAAK,CAAL;AACA,GAnBD;;AAqBQ,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAR,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACC,QAAI,MAAM,GAAW,CAAC,CAAtB;;AACA,QAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB;AACA;;AACD,QAAI,KAAK,CAAL,CAAO,KAAP,GAAe,CAAnB,EAAsB;AACrB,WAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,CAAL,CAAO,KAAnC,EAA0C,EAAE,CAA5C,EAA+C;AAC9C,YAAI,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,KAAoB,IAAxB,EAA8B;AAC7B,UAAA,MAAM,GAAG,CAAT;AACA;AACA;AACD;AACD;;AACD,QAAI,MAAM,IAAI,CAAd,EAAiB;AAChB,WAAK,CAAL,CAAO,MAAP,CAAc,MAAd,IAAwB,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAxB;AACA,UAAI,CAAC,GAAoB,IAAI,eAAJ,CAAoB,KAAK,CAAL,CAAO,EAAP,CAAU,CAA9B,EAAiC,KAAK,CAAL,CAAO,EAAP,CAAU,CAA3C,CAAzB;AACA,WAAK,CAAL,CAAO,MAAP,CAAc,MAAd,EAAsB,CAAtB,CAAwB,EAAxB,GAA6B,CAA7B;AACA,UAAI,IAAI,GAAG,KAAK,CAAL,CAAO,aAAP,CAAqB,KAArB,CAAX;AACA,UAAI,GAAC,GAAuC,IAAI,CAAC,gBAAL,EAA5C;AACA,MAAA,CAAC,CAAC,CAAF,GAAM,GAAN;AACA,UAAI,KAAK,GAAG,IAAZ;AACA,UAAI,CAAC,GAAG,IAAI,MAAJ,CAAuB,cAAvB,EAAuC,CAAvC,CAAR;AACA,WAAK,CAAL,CAAO,OAAP,CAAe,GAAf,EAAkB,CAAlB;AACA,MAAA,CAAC,CAAC,GAAF,CAAM,IAAI,CAAC,MAAL,CAAY,MAAZ,EAAoB,UAAC,CAAD,EAAmB;AAAK,eAAA,KAAI,CAAC,EAAL,CAAQ,CAAR,EAAA,MAAA,CAAA;AAAkB,OAA9D,CAAN;AACA,MAAA,CAAC,CAAC,GAAF,CAAM,IAAI,CAAC,MAAL,CAAY,kBAAZ,EAAgC,UAAC,CAAD,EAAmB;AAAK,eAAA,KAAI,CAAC,EAAL,CAAQ,CAAR,EAAA,MAAA,CAAA;AAAkB,OAA1E,CAAN;AACA,MAAA,CAAC,CAAC,GAAF,CAAM,IAAI,CAAC,MAAL,CAAY,OAAZ,EAAqB,UAAC,CAAD,EAAmB;AAAK,eAAA,KAAI,CAAC,EAAL,CAAQ,CAAR,EAAA,MAAA,CAAA;AAAkB,OAA/D,CAAN;AACA,WAAK,CAAL,CAAO,QAAP,CAAgB,CAAhB;AACA,UAAI,CAAC,GAAQ,KAAK,CAAL,CAAO,EAAP,CAAU,CAAV,CAAY,KAAK,CAAL,CAAO,MAAP,CAAc,MAAd,EAAsB,CAAtB,GAA0B,CAAtC,EAAyC,KAAK,CAAL,CAAO,MAAP,CAAc,MAAd,EAAsB,CAA/D,EAAkE,KAAK,CAAL,CAAO,MAAP,CAAc,MAAd,EAAsB,CAAxF,CAAb;;AACA,UAAI,CAAC,IAAI,IAAT,EAAe;AACd;AACA;;AACD,UAAI,GAAC,GAAW,CAAC,CAAC,KAAlB;;AACA,UAAI,CAAC,GAAK,YAAA;AACT,YAAI,IAAI,GAAG,IAAI,mCAAJ,EAAX;AACA,QAAA,IAAI,CAAC,GAAL,GAAW,GAAX;AACA,QAAA,IAAI,CAAC,KAAL,GAAa,GAAb;AACA,eAAO,IAAP;AACA,OALQ,EAAT;;AAMA,WAAK,CAAL,CAAO,EAAP,CAAU,CAAV;AACA,MAAA,GAAC,GAAG,CAAC,CAAC,GAAN;;AACA,UAAI,GAAC,IAAI,IAAT,EAAe;AACd,QAAA,GAAC,CAAC,GAAF,GAAQ,GAAR;AACA;AACD;AACD,GA5CO;;AA6CA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAA+B,CAA/B,EAAwC;AACvC,QAAI,EAAE,GAAG,CAAC,CAAC,aAAX;AACA,QAAI,IAAI,GAAsB,EAAE,CAAC,MAAjC;AACA,QAAI,CAAC,GAAa,IAAI,CAAC,QAAL,IAAwB,IAAK,CAAC,UAAN,IAAoB,UAApB,IAAkC,EAAE,CAAC,IAAH,IAAW,kBAAvF;;AACA,QAAI,CAAJ,EAAO;AACN,WAAK,iBAAL,CAAuB,CAAvB,EAA0B,CAA1B;AACA;AACD,GAPO;;AAQA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAA+B,CAA/B,EAAwC;AACvC,SAAK,aAAL,CAAmB,CAAnB,EAAsB,CAAtB;AACA,GAFO;;AAKA,EAAA,sBAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,CAAtB,EAA0C,CAA1C,EAAmD;AAClD,QAAI,CAAC,GAAS,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAd;AACA,SAAK,CAAL,CAAO,MAAP,CAAc,CAAd,IAAmB,IAAnB;;AACA,QAAI,CAAC,IAAI,IAAL,IAAa,CAAC,CAAC,CAAF,IAAO,IAApB,IAA4B,CAAC,CAAC,CAAF,CAAI,EAAJ,IAAU,IAA1C,EAAgD;AAC/C,UAAI,EAAE,GAAG,CAAC,CAAC,aAAX;AACA,UAAI,CAAC,GAAsB,EAAE,CAAC,MAA9B;;AACA,UAAI,KAAK,CAAL,CAAO,WAAP,CAAmB,CAAnB,CAAJ,EAA2B;AAC1B,YAAI,CAAC,GAAG,KAAK,CAAL,CAAO,IAAP,CAAY,CAAZ,CAAR;;AACA,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAAC,CAAC,KAAtB,EAA6B,CAAC,EAA9B,EAAkC;AACjC,UAAA,CAAC,CAAC,MAAF,CAAS,CAAT;AACA;;AACD,QAAA,CAAC,CAAC,KAAF;AACA,aAAK,CAAL,CAAO,UAAP,CAAkB,CAAlB;AACA;AACD;;AACD,SAAK,CAAL;AACA,SAAK,EAAL;AACA,GAjBO;;AAkBA,EAAA,sBAAA,CAAA,SAAA,CAAA,iBAAA,GAAR,UAA0B,CAA1B,EAA8C,CAA9C,EAAuD;AACtD,QAAI,CAAC,GAAS,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAd;AACA,QAAI,CAAC,GAAY,IAAjB;;AACA,QAAI,CAAC,IAAI,IAAL,IAAa,CAAC,CAAC,CAAF,IAAO,IAApB,IAA4B,CAAC,CAAC,CAAF,CAAI,EAAJ,IAAU,IAA1C,EAAgD;AAC/C,MAAA,CAAC,GAAG,KAAJ;AACA,UAAI,IAAI,GAAwC,CAAC,CAAC,CAAF,CAAI,EAAJ,CAAQ,CAAxD;;AACA,UAAI,CAAC,IAAI,CAAC,QAAV,EAAoB;AACnB,QAAA,CAAC,GAAG,IAAJ;AACA;;AACD,UAAc,IAAI,CAAC,KAAL,IAAc,CAAd,IAAmB,IAAI,CAAC,MAAL,IAAe,CAAhD,EAAoD;AACnD,QAAA,CAAC,GAAG,IAAJ;AACA;AACD;;AACD,SAAK,CAAL,CAAO,MAAP,CAAc,CAAd,IAAmB,IAAnB;;AACA,QAAI,CAAJ,EAAO;AACN,WAAK,CAAL;AACA,WAAK,EAAL;AACA;AACA;;AACD,QAAI,EAAE,GAAG,CAAC,CAAC,aAAX;AACA,QAAI,CAAC,GAAsB,EAAE,CAAC,MAA9B;;AACA,QAAI,KAAK,CAAL,CAAO,WAAP,CAAmB,CAAnB,CAAJ,EAA2B;AAC1B,UAAI,CAAC,GAAG,KAAK,CAAL,CAAO,IAAP,CAAY,CAAZ,CAAR;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAAC,CAAC,KAAtB,EAA6B,CAAC,EAA9B,EAAkC;AACjC,QAAA,CAAC,CAAC,MAAF,CAAS,CAAT;AACA;;AACD,MAAA,CAAC,CAAC,KAAF;AACA,WAAK,CAAL,CAAO,UAAP,CAAkB,CAAlB;AACA;;AACD,SAAK,CAAL,CAAO,EAAP,CAAU,CAAV,EAA8B,CAAC,CAAC,CAAF,CAAI,EAAlC;;AACA,QAAI,CAAC,CAAC,CAAF,IAAO,IAAX,EAAiB;AAChB,WAAK,CAAL,CAAO,EAAP,CAAU,CAAV;AACA;;AACD,SAAK,CAAL;AACA,SAAK,EAAL;AACA,GAnCO;;AAoCR,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,UAAE,CAAF,EAAa,CAAb,EAAiC,CAAjC,EAA4C,CAA5C,EAAqD;AACpD,QAAI,CAAC,GAAG,IAAI,eAAJ,CAAoB,CAApB,EAAuB,CAAvB,CAAR;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAR;;AACA,QAAI,CAAC,CAAC,CAAC,CAAF,CAAI,OAAT,EAAkB;AACjB,MAAA,CAAC,IAAY,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,CAAI,IAAf,CAAD,CAArB;AACA,MAAA,CAAC,IAAY,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,CAAI,GAAf,CAAD,CAArB;AACA;;AACD,IAAA,CAAC,CAAC,CAAF,GAAM,IAAI,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAN;AACA,WAAO,CAAP;AACA,GATD;;AAUA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAW;AACV,IAAA,CAAC,CAAC,CAAF,GAAM,CAAN;AACA,GAFD;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAW;AACV,IAAA,CAAC,CAAC,CAAF,GAAM,CAAN;AACA,GAFD;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,YAAA;AACC,WAAO,IAAP;AACA,GAFD;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,UAAE,CAAF,EAA4B;AAC3B,QAAI,KAAK,CAAL,CAAO,EAAP,IAAa,IAAjB,EAAuB;AACtB,WAAK,CAAL,CAAO,EAAP,CAAU,eAAV;AACA,KAFD,MAEO;AACN,UAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB,aAAK,CAAL,CAAO,UAAP,CAA8B,CAA9B,EAAiC,CAAjC;AACA,OAFD,MAEO;AACN,QAAA,MAAM,CAAC,UAAP,CAA8B,CAA9B,EAAiC,CAAjC;AACA;AACD;AACD,GAVD;;AAaA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,CAAC,CAAf,EAAkB;AACjB,WAAK,CAAL,GAAS,MAAM,CAAC,WAAP,CAAmB,KAAK,CAAC,KAAK,CAAN,EAAS,KAAK,CAAL,CAAO,EAAhB,CAAxB,EAA6C,EAA7C,CAAT;AACA;AACD,GAJD;;AAKA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,CAAC,CAAf,EAAkB;AACjB,MAAA,MAAM,CAAC,aAAP,CAAqB,KAAK,CAA1B;AACA,WAAK,CAAL,GAAS,CAAC,CAAV;AACA;AACD,GALD;;AAMA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,CAAC,CAAf,EAAkB;AACjB,WAAK,CAAL,GAAS,MAAM,CAAC,WAAP,CAAmB,KAAK,CAAC,KAAK,CAAN,EAAS,KAAK,CAAL,CAAO,EAAhB,CAAxB,EAA6C,EAA7C,CAAT;AACA;AACD,GAJD;;AAKA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,CAAC,CAAf,EAAkB;AACjB,MAAA,MAAM,CAAC,aAAP,CAAqB,KAAK,CAA1B;AACA,WAAK,CAAL,GAAS,CAAC,CAAV;AACA;AACD,GALD;;AAMA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,CAAC,CAAf,EAAkB;AACjB,WAAK,EAAL;AACA,WAAK,CAAL,CAAO,EAAP;AACA;AACD,GALD;;AASA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAS;AACR,SAAK,CAAL,GAA2B,CAA3B;AACA,SAAK,CAAL,CAAO,WAAP,CAAmB,gBAAnB,CAAoC,UAApC,EAAgD,UAAhD;AACA,SAAK,CAAL,GAAS,KAAK,CAAL,CAAO,aAAP,CAAqB,QAArB,CAAT;AACA,SAAK,CAAL,CAAO,gBAAP,CAAwB,UAAxB,EAAoC,UAApC;AACA,SAAK,CAAL,CAAO,gBAAP,CAAwB,KAAxB,EAA+B,KAA/B;AACA,SAAK,CAAL,CAAO,gBAAP,CAAwB,MAAxB,EAAgC,KAAhC;AACA,SAAK,CAAL,CAAO,MAAP,CAAc,KAAK,CAAnB;AACA,SAAK,CAAL,GAAS,IAAI,gBAAJ,CAAqB,IAAI,kBAAJ,EAArB,EAA+C,KAAK,CAAL,CAAO,kBAAP,CAA0B,KAAK,CAA/B,CAA/C,CAAT;AACA,SAAK,EAAL,CAAQ,KAAK,CAAL,CAAO,WAAP,CAAmB,KAAnB,EAAR,EAAoC,KAAK,CAAL,CAAO,WAAP,CAAmB,MAAnB,EAApC;AACA,GAVD;;AAWQ,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAsB,CAAtB,EAA+B;AAC9B,SAAK,CAAL,CAAO,YAAP,CAAoB,OAApB,EAAsC,QAAQ,CAAE,CAAC,GAAG,KAAK,CAAL,CAAO,EAAb,CAAR,CAA2B,QAA3B,EAAtC;AACA,SAAK,CAAL,CAAO,YAAP,CAAoB,QAApB,EAAuC,QAAQ,CAAE,CAAC,GAAG,KAAK,CAAL,CAAO,EAAb,CAAR,CAA2B,QAA3B,EAAvC;AACA,SAAK,CAAL,CAAO,gBAAP,CAAwB,OAAxB,EAAiC,CAAC,CAAC,QAAF,KAAe,IAAhD;AACA,SAAK,CAAL,CAAO,gBAAP,CAAwB,QAAxB,EAAkC,CAAC,CAAC,QAAF,KAAe,IAAjD;AACA,SAAK,CAAL,CAAO,EAAP,GAAY,IAAI,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAZ;AACA,SAAK,CAAL,CAAO,EAAP;AACA,GAPO;;AAQR,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,SAAK,EAAL;AACA,GAFD;;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,sBAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,YAAA;AACC,aAAO,CAAP;AACA,KAFQ;qBAAA;;AAAA,GAAT;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA,CACC,CADD;;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,sBAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,YAAA;AACC,aAAO,KAAK,QAAZ;AACA,KAFU;SAGX,UAAY,CAAZ,EAAsB;AACrB,WAAK,QAAL,GAAgB,CAAhB;AACA,KALU;qBAAA;;AAAA,GAAX;;AAMA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB;AACA;;AACD,QAAI,CAAC,KAAK,OAAV,EAAmB;AAClB,WAAK,OAAL,GAAe,IAAf;AACA,WAAK,CAAL,CAAO,EAAP,CAAU,CAAV;AACA;AACD,GARD;;AASA,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,CAAR,EAAkB;AACjB,SAAK,OAAL,GAAe,KAAf;AACA,SAAK,EAAL;AACA,GAHD;;AAKQ,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,QAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB;AACA;;AACD,QAAI,KAAK,CAAL,CAAO,CAAP,IAAY,KAAK,CAAL,CAAO,EAAP,IAAa,CAA7B,EAAgC;AAC/B,WAAK,CAAL,CAAO,CAAP;AACA,WAAK,CAAL,CAAO,EAAP,CAAU,KAAK,CAAL,CAAO,EAAjB,EAAqB,KAAK,CAAL,CAAO,EAA5B;AACA;;AACD,QAAI,CAAC,KAAK,EAAL,CAAQ,OAAb,EAAsB;AACrB,WAAK,CAAL,CAAO,CAAP,CAAS,KAAK,EAAL,CAAQ,IAAjB,EAAuB,KAAK,EAAL,CAAQ,GAA/B,EAAoC,KAAK,EAAL,CAAQ,KAA5C,EAAmD,KAAK,EAAL,CAAQ,MAA3D;AACA;;AACD,SAAK,EAAL,GAAU,KAAK,CAAL,CAAO,EAAjB;;AACA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,CAAL,CAAO,KAAnC,EAA0C,CAAC,EAA3C,EAA+C;AAC9C,UAAI,CAAC,GAAG,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAR;;AACA,UAAI,CAAC,CAAC,CAAF,IAAO,CAAX,EAAc;AACb,aAAK,EAAL,CAAQ,CAAR;AACA;AACD;;AACD,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,CAAL,CAAO,KAAnC,EAA0C,CAAC,EAA3C,EAA+C;AAC9C,UAAI,CAAC,GAAG,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,CAAR;;AACA,UAAI,CAAC,CAAC,CAAF,IAAO,CAAX,EAAc;AACb,aAAK,EAAL,CAAQ,CAAR;AACA;AACD;;AACD,QAAI,KAAK,CAAL,CAAO,CAAP,IAAY,KAAK,CAAL,CAAO,EAAP,IAAa,CAA7B,EAAgC;AAC/B,WAAK,CAAL,CAAO,CAAP;AACA;;AACD,SAAK,CAAL,CAAO,EAAP;AACA,SAAK,CAAL,CAAO,EAAP;AACA,GA7BO;;AA8BR,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,YAAA;AACC,QAAI,CAAC,GAAG,IAAR;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAL,CAAO,KAA3B,EAAkC,CAAC,EAAnC,EAAuC;AACtC,UAAI,KAAK,CAAL,CAAO,MAAP,CAAc,CAAd,KAAoB,IAAxB,EAA8B;AAC7B,QAAA,CAAC,GAAG,KAAJ;AACA;AACD;;AACD,WAAO,CAAP;AACA,GARD;;AASQ,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAmB;AAClB,QAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB;AACA;;AACD,QAAI,CAAC,GAAoB,CAAC,CAAC,EAA3B;AACA,QAAI,CAAC,GAAG,CAAC,CAAC,QAAF,GAAa,KAAK,CAAL,CAAO,QAA5B;;AACA,QAAI,CAAC,IAAI,IAAL,IAAa,CAAC,CAAC,CAAF,IAAO,IAAxB,EAA8B;AAC7B;AACA;;AACD,QAAI,KAAK,CAAL,CAAO,CAAC,CAAC,CAAT,CAAJ,EAAiB;AAChB;AACA;;AACD,QAAI,CAAC,CAAC,CAAC,CAAF,CAAI,OAAT,EAAkB;AACjB,UAAI,CAAC,CAAC,CAAF,CAAI,KAAJ,GAAY,CAAZ,IAAiB,CAAC,CAAC,CAAF,CAAI,MAAJ,GAAa,CAAlC,EAAqC;AACpC;AACA;;AACD,WAAK,CAAL,CAAO,CAAP,CAAS,CAAC,CAAC,CAAX,EAAc,CAAd,EAAiB,CAAC,CAAC,CAAF,CAAI,IAArB,EAA2B,CAAC,CAAC,CAAF,CAAI,GAA/B,EAAoC,CAAC,CAAC,CAAF,CAAI,KAAxC,EAA+C,CAAC,CAAC,CAAF,CAAI,MAAnD,EAA2D,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,GAAM,KAAK,CAAL,CAAO,EAAP,CAAU,IAA3B,CAA3D,EAA6F,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,GAAM,KAAK,CAAL,CAAO,EAAP,CAAU,GAA3B,CAA7F,EAA8H,CAAC,CAAC,KAAhI,EAAuI,CAAC,CAAC,MAAzI;AACA,KALD,MAKO;AACN,WAAK,CAAL,CAAO,CAAP,CAAS,CAAC,CAAC,CAAX,EAAc,CAAd,EAAiB,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,GAAM,KAAK,CAAL,CAAO,EAAP,CAAU,IAA3B,CAAjB,EAAmD,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAF,GAAM,KAAK,CAAL,CAAO,EAAP,CAAU,GAA3B,CAAnD,EAAoF,CAAC,CAAC,KAAtF,EAA6F,CAAC,CAAC,MAA/F;AACA;AACD,GApBO;;AAqBA,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAR,UAAU,CAAV,EAAgB;AACf,QAAI,IAAI,GAAuC,CAA/C;;AACA,QAAI,CAAC,IAAI,CAAC,QAAV,EAAoB;AACnB,aAAO,IAAP;AACA;;AACD,QAAc,IAAI,CAAC,KAAL,IAAc,CAAd,IAAmB,IAAI,CAAC,MAAL,IAAe,CAAhD,EAAoD;AACnD,aAAO,IAAP;AACA;;AACD,WAAO,KAAP;AACA,GATO;;AAUR,EAAA,sBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,YAAA;AACC,SAAK,EAAL;AACA,GAFD;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAsB;AACrB,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,EAAL;AACA,GAHD;;AAKA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAiB;AAChB,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,CAAL;AACA,GAHD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAU;AACT,SAAK,CAAL,CAAO,EAAP,GAAY,CAAZ;AACA,SAAK,CAAL,CAAO,EAAP;AACA,GAHD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA,CACC,CADD;;AAEA,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACC,WAAO,IAAP;AACA,GAFD;;AApZO,EAAA,sBAAA,CAAA,EAAA,GAAW,QAAQ,CAAC,sBAAD,EAAyB,wBAAzB,EAAyD,IAAK,CAAC,CAA/D,EAAkE,CAAC,wBAAD,CAAlE,CAAnB;AAuZR,SAAA,sBAAA;AAAC,CAxZD,CAA4C,IAA5C,CAAA;;SAAa,sB;AA0Zb;;AAEG;;AACH,IAAA,uBAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAAsD,EAAA,SAAA,CAAA,uBAAA,EAAA,MAAA,CAAA;;AAErD,WAAA,uBAAA,CAAY,CAAZ,EAAuB,CAAvB,EAAkC,CAAlC,EAA6C,CAA7C,EAAwD,CAAxD,EAAiE;AAAjE,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADR;;AAQQ,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AAQA,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AAQA,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AAUA,IAAA,KAAA,CAAA,CAAA,GAAa,KAAb;AAUR,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AACA,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AACA,IAAA,KAAA,CAAA,CAAA,GAAY,CAAZ;AACQ,IAAA,KAAA,CAAA,CAAA,GAAwB,IAAxB;AA7CP,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;AACA,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;AACA,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;AACA,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;AACA,IAAA,KAAI,CAAC,CAAL,GAAS,CAAT;;AACA;;AAED,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,GAAJ,EAAK;SAAL,YAAA;AACC,aAAO,KAAK,CAAZ;AACA,KAFI;SAGL,UAAM,CAAN,EAAe;AACd,WAAK,CAAL,GAAS,CAAT;AACA,WAAK,CAAL,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB;AACA,KANI;qBAAA;;AAAA,GAAL;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,GAAJ,EAAK;SAAL,YAAA;AACC,aAAO,KAAK,CAAZ;AACA,KAFI;SAGL,UAAM,CAAN,EAAe;AACd,WAAK,CAAL,GAAS,CAAT;AACA,WAAK,CAAL,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB;AACA,KANI;qBAAA;;AAAA,GAAL;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,GAAJ,EAAK;SAAL,YAAA;AACC,aAAO,KAAK,CAAZ;AACA,KAFI;SAGL,UAAM,CAAN,EAAe;AACd,WAAK,CAAL,GAAS,CAAT;;AACA,UAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB,aAAK,CAAL,CAAO,QAAP,GAAkB,KAAK,CAAvB;AACA;AACD,KARI;qBAAA;;AAAA,GAAL;AAUA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,GAAJ,EAAK;SAAL,YAAA;AACC,aAAO,KAAK,CAAZ;AACA,KAFI;SAGL,UAAM,CAAN,EAAgB;AACf,WAAK,CAAL,GAAS,CAAT;;AACA,UAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB,aAAK,CAAL,CAAO,EAAP,GAAY,KAAK,CAAjB;AACA;AACD,KARI;qBAAA;;AAAA,GAAL;AAaA,EAAA,MAAA,CAAA,cAAA,CAAI,uBAAA,CAAA,SAAJ,EAAI,GAAJ,EAAK;SAAL,YAAA;AACC,aAAO,KAAK,CAAZ;AACA,KAFI;SAGL,UAAM,CAAN,EAA2B;AAC1B,WAAK,CAAL,GAAS,CAAT;;AACA,UAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB,aAAK,CAAL,CAAO,QAAP,GAAkB,KAAK,CAAvB;AACA;AACD,KARI;qBAAA;;AAAA,GAAL;;AASA,EAAA,uBAAA,CAAA,SAAA,CAAA,CAAA,GAAA,UAAE,CAAF,EAAa,CAAb,EAAwB,CAAxB,EAAiC;AAChC,QAAI,CAAC,GAAG,IAAI,MAAJ,CAAsB,IAAK,CAAC,CAA5B,EAA+B,CAA/B,CAAR;AACA,SAAK,CAAL,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB;AACA,QAAI,CAAC,GAAQ,IAAb;;AACA,QAAI,CAAC,CAAC,KAAF,GAAU,CAAd,EAAiB;AAChB,MAAA,CAAC,GAAG,QAAQ,CAAY,GAAI,CAAC,CAAjB,EAAoB,CAAC,CAAC,MAAF,CAAS,CAAT,CAApB,CAAZ;AACA;;AACD,WAAO,CAAP;AACA,GARD;;AAUU,EAAA,uBAAA,CAAA,SAAA,CAAA,CAAA,GAAV,UAAY,CAAZ,EAAuB,CAAvB,EAAkC,CAAlC,EAA6C,CAA7C,EAAsD;AACrD,QAAI,KAAK,CAAL,IAAU,IAAd,EAAoB;AACnB,WAAK,CAAL,CAAO,EAAP,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;AACA;AACD,GAJS;;AApEH,EAAA,uBAAA,CAAA,EAAA,GAAW,QAAQ,CAAC,uBAAD,EAA0B,yBAA1B,EAA2D,gBAAiB,CAAC,CAA7E,CAAnB;AAyER,SAAA,uBAAA;AAAC,CA1ED,CAAsD,gBAAtD,CAAA;;SAAsB,uB;AA4EtB;;AAEG;;AACH,IAAA,kBAAA;AAAA;;AAAA;AAAA,UAAA,MAAA,EAAA;AAAwC,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AAEvC,WAAA,kBAAA,GAAA;AAAA,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADR;;AASA,IAAA,KAAA,CAAA,EAAA,GAAyB,IAAzB;AACA,IAAA,KAAA,CAAA,EAAA,GAA6B,IAA7B;AACQ,IAAA,KAAA,CAAA,EAAA,GAAgC,IAAhC;AAeR,IAAA,KAAA,CAAA,EAAA,GAAY,IAAZ;AAEA,IAAA,KAAA,CAAA,EAAA,GAAa,CAAb;AACA,IAAA,KAAA,CAAA,EAAA,GAAc,KAAd;AAkBA,IAAA,KAAA,CAAA,eAAA,GAAsE,IAAtE;AA0CQ,IAAA,KAAA,CAAA,EAAA,GAAa,CAAb;AACA,IAAA,KAAA,CAAA,EAAA,GAAa,CAAb;AAaA,IAAA,KAAA,CAAA,EAAA,GAAW,IAAI,IAAJ,EAAX;AACA,IAAA,KAAA,CAAA,EAAA,GAAY,IAAZ;AACA,IAAA,KAAA,CAAA,EAAA,GAAa,CAAb;AA4BA,IAAA,KAAA,CAAA,EAAA,GAAmB,IAAI,MAAJ,CAAuB,IAAK,CAAC,CAA7B,EAAgC,CAAhC,CAAnB;AA4HA,IAAA,KAAA,CAAA,EAAA,GAAc,KAAd;AA+BA,IAAA,KAAA,CAAA,EAAA,GAAwC,IAAI,UAAJ,CAA4C,IAAK,CAAC,CAAlD,EAA2D,eAAgB,CAAC,CAA5E,EAA+E,CAA/E,EAAkF,UAAlF,EAA8F,IAAI,oBAAJ,EAA9F,CAAxC;AAOS,IAAA,KAAA,CAAA,EAAA,GAAmB,IAAI,MAAJ,CAAuB,IAAK,CAAC,CAA7B,EAAgC,CAAhC,CAAnB;AAIjB,IAAA,KAAA,CAAA,eAAA,GAAuD,IAAvD;AACQ,IAAA,KAAA,CAAA,EAAA,GAAc,KAAd;AAgER,IAAA,KAAA,CAAA,EAAA,GAAW,IAAX;AAoBA,IAAA,KAAA,CAAA,EAAA,GAA4B,IAA5B;AAMA,IAAA,KAAA,CAAA,aAAA,GAAqD,IAArD;AAIA,IAAA,KAAA,CAAA,gBAAA,GAAqF,IAArF;AACA,IAAA,KAAA,CAAA,eAAA,GAAmF,IAAnF;AAWQ,IAAA,KAAA,CAAA,EAAA,GAAa,CAAb;AApZP,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,CAAC,KAAf;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,qBAAJ,EAAV;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,sBAAJ,CAA2B,KAA3B,CAAV;AACA,IAAA,KAAI,CAAC,EAAL,GAAgB,kBAAmB,CAAC,CAApC;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,KAAI,CAAC,EAAf;AACA,IAAA,KAAI,CAAC,EAAL,GAAU,KAAI,CAAC,EAAf;;AACA;;AAID,EAAA,MAAA,CAAA,cAAA,CAAI,kBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFK;SAGN,UAAO,CAAP,EAAmC;AAClC,UAAI,KAAK,EAAL,IAAW,IAAf,EAAqB;AACpB,aAAK,EAAL,CAAQ,UAAR,CAAmB,IAAnB;AACA;;AACD,WAAK,EAAL,GAAU,CAAV;;AACA,UAAI,KAAK,EAAL,IAAW,IAAf,EAAqB;AACpB,aAAK,EAAL,CAAQ,QAAR,CAAiB,IAAjB,EAAuB,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAA5B;AACA;AACD,KAXK;qBAAA;;AAAA,GAAN;;AAsBA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,CAAC,mBAAmB,CAAC,KAAK,EAAN,CAAxB,EAAmC;AAClC,aAAO,KAAK,EAAZ;AACA;;AACD,WAAO,IAAP;AACA,GALD;;AAOA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,CAAC,mBAAmB,CAAC,KAAK,EAAN,CAAxB,EAAmC;AAClC,aAAO,KAAK,EAAZ;AACA;;AACD,WAAO,IAAP;AACA,GALD;;AAOU,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAV,UAAa,CAAb,EAAwB,CAAxB,EAAgC,CAAhC,EAAsC;AACrC,QAAI,CAAC,GAAG,IAAI,wBAAJ,CAA6B,CAA7B,CAAR;;AACA,QAAI,KAAK,eAAL,IAAwB,IAA5B,EAAkC;AACjC,WAAK,eAAL,CAAqB,IAArB,EAA2B,CAA3B;AACA;;AACD,YAAQ,CAAR;AACC,WAAK,kBAAkB,CAAC,GAAnB,CAAuB,CAAvB,CAAL;AACA,YAAI,KAAK,EAAL,IAAW,IAAf,EAAqB;AACpB,eAAK,EAAL,CAAQ,CAAR,GAAY,IAAZ;AACA;;AACD,aAAK,EAAL;AACA,aAAK,EAAL;AACA,aAAK,EAAL;AACA;;AAEA,WAAK,kBAAkB,CAAC,GAAnB,CAAuB,CAAvB,CAAL;AACA,aAAK,EAAL;AACA;;AAEA,WAAK,kBAAkB,CAAC,GAAnB,CAAuB,CAAvB,CAAL;AACA,aAAK,EAAL;AACA;;AAEA,WAAK,kBAAkB,CAAC,GAAnB,CAAuB,CAAvB,CAAL;AACA,YAAI,CAAC,KAAK,EAAV,EAAc;AACb,eAAK,EAAL,CAAQ,CAAR;AACA;;AACD;;AAEA,WAAK,kBAAkB,CAAC,GAAnB,CAAuB,CAAvB,CAAL;AACA,aAAK,EAAL,GAAU,KAAK,EAAf;AACA,aAAK,EAAL;AACA;AA3BD;AA+BA,GApCS;;AAqCA,EAAA,kBAAA,CAAA,SAAA,CAAA,CAAA,GAAV,YAAA;AACC,IAAA,MAAA,CAAA,SAAA,CAAM,CAAN,CAAO,IAAP,CAAO,IAAP;;AACA,SAAK,EAAL;AACA,GAHS;;AAMF,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,SAAK,EAAL;;AACA,QAAI,KAAK,EAAL,IAAW,IAAf,EAAqB;AACpB,WAAK,EAAL,GAAU,OAAO,CAAC,OAAR,CAAgB,OAAO,CAAC,KAAK,EAAL,CAAQ,CAAT,EAAY,CAAZ,CAAvB,CAAV;AACA,WAAK,EAAL,GAAU,OAAO,CAAC,OAAR,CAAgB,OAAO,CAAC,KAAK,EAAL,CAAQ,CAAT,EAAY,CAAZ,CAAvB,CAAV;AACA;AACD,GANO;;AAOR,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAc,CAAd,EAAyB,CAAzB,EAAoC,CAApC,EAA6C;AAC5C,SAAK,EAAL;AACA,SAAK,EAAL;AACA,SAAK,EAAL;AACA,GAJD;;AAQQ,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,QAAI,KAAK,EAAT,EAAa;AACZ,WAAK,EAAL,GAAU,OAAO,EAAjB;AACA,WAAK,EAAL,GAAU,KAAK,EAAf;AACA,WAAK,EAAL,GAAU,KAAK,EAAf;AACA,WAAK,EAAL,CAAQ,EAAR;AACA,KALD,MAKO;AACN,WAAK,EAAL,GAAU,KAAK,EAAf;AACA,WAAK,EAAL,GAAU,KAAK,EAAf;AACA,WAAK,EAAL;AACA;AACD,GAXO;;AAYR,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,CAAC,GAAW,CAAhB;AACA,QAAI,CAAC,GAAG,OAAO,GAAG,OAAV,KAAsB,KAAK,EAAL,CAAQ,OAAR,EAA9B;AACA,QAAI,CAAC,GAAW,CAAC,GAAG,IAApB;AACA,QAAI,CAAC,GAAW,QAAQ,CAAC,CAAT,CAAY,CAAD,GAAM,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAhB;AACA,QAAI,CAAC,GAAW,KAAK,EAAL,IAAW,IAAX,GAAkB,KAAK,EAAL,CAAQ,IAAR,CAAa,CAAb,CAAlB,GAAoC,CAApD;AACA,QAAI,CAAC,GAAW,IAAI,CAApB;AACA,SAAK,EAAL,GAAU,KAAK,EAAL,GAAU,CAAV,GAAc,KAAK,EAAL,GAAU,CAAlC;AACA,SAAK,EAAL,GAAiB;AAAE,MAAA,KAAK,EAAE,WAAT;AAAsB,MAAA,CAAC,EAAE,KAAK,EAAL,CAAQ,CAAR,GAAY,CAAZ,GAAgB,KAAK,EAAL,CAAQ,CAAR,GAAY,CAArD;AAAwD,MAAA,CAAC,EAAE,KAAK,EAAL,CAAQ,CAAR,GAAY,CAAZ,GAAgB,KAAK,EAAL,CAAQ,CAAR,GAAY;AAAvF,KAAjB;;AACA,QAAI,CAAC,IAAI,CAAT,EAAY;AACX,WAAK,EAAL,CAAQ,EAAR;AACA,KAFD,MAEO,CACN;;AACD,SAAK,EAAL;AACA,GAdD;;AAgBQ,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAsB,CAAtB,EAAiC,CAAjC,EAA4C,CAA5C,EAAqD;AACpD,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,EAAL,CAAQ,KAApC,EAA2C,EAAE,CAA7C,EAAgD;AAC/C,UAAI,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,CAAvB,IAA4B,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,CAAnD,IAAwD,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,CAA/E,IAAoF,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,CAA/G,EAAkH;AACjH,eAAO,CAAP;AACA;AACD;;AACD,WAAO,CAAC,CAAR;AACA,GAPO;;AAQR,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAa;AAAb,QAAA,KAAA,GAAA,IAAA;;AACC,SAAK,EAAL,GAAU,KAAV;AACA,SAAK,EAAL,GAAU,KAAV;AACA,QAAI,CAAC,GAAY,KAAK,EAAtB;;AACA,QAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,CAAC,KAAK,EAAL,CAAQ,CAAR,EAApB,IAAmC,KAAK,EAAL,CAAQ,KAAR,IAAiB,CAApD,IAAyD,KAAK,EAAL,CAAQ,MAAR,IAAkB,CAA/E,EAAkF;AACjF;AACA;;AACD,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,IAAL,CAAU,KAAK,EAAL,CAAQ,KAAR,GAAgB,KAAK,EAAL,CAAQ,CAAlC,CAAD,CAAhC;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,IAAI,CAAC,KAAL,CAAW,CAAC,OAAO,CAAC,KAAK,EAAL,GAAU,CAAX,EAAc,CAAd,CAAnB,CAAZ,CAAD,CAAhC;;AACA,QAAI,CAAC,IAAI,KAAK,EAAL,GAAU,CAAnB,EAAsB;AACrB,MAAA,CAAC,GAAI,KAAK,EAAL,GAAU,CAAX,GAAgB,CAApB;AACA;;AACD,QAAI,CAAC,GAAW,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAX,CAAD,CAAxB;AACA,QAAI,CAAC,GAAW,KAAK,EAArB;AACA,QAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,MAAR,GAAiB,CAAjB,GAAqB,KAAK,EAAL,CAAQ,KAA7C;AACA,QAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,CAAR,GAAY,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAA5B;AACA,QAAI,CAAC,GAAW,KAAK,EAAL,CAAQ,CAAR,GAAY,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAA5B;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAY,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAAL,CAAQ,CAArB,GAA0B,CAArC,CAAD,CAAhC;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,IAAL,CAAW,CAAC,KAAK,EAAL,CAAQ,CAAR,GAAY,CAAb,IAAkB,KAAK,EAAL,CAAQ,CAA3B,GAAgC,CAA1C,CAAD,CAAhC;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,KAAL,CAAY,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAAL,CAAQ,CAArB,GAA0B,CAArC,CAAD,CAAhC;AACA,QAAI,CAAC,GAAmB,QAAQ,CAAC,IAAI,CAAC,IAAL,CAAW,CAAC,KAAK,EAAL,CAAQ,CAAR,GAAY,CAAb,IAAkB,KAAK,EAAL,CAAQ,CAA3B,GAAgC,CAA1C,CAAD,CAAhC;;AACA,QAAI,CAAC,CAAL,EAAQ;AACP,MAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAJ;AACA,MAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAJ;AACA;;AACD,IAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAJ;AACA,IAAA,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAJ;AACA,QAAI,CAAC,GAAW,CAAE,CAAC,GAAG,CAAL,GAAW,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAAL,CAAQ,CAAhC,IAAsC,CAAtD;AACA,QAAI,CAAC,GAAW,CAAE,CAAC,GAAG,CAAL,GAAW,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAAL,CAAQ,CAAhC,IAAsC,CAAtD;AACA,QAAI,CAAC,GAAY,CAAC,GAAG,KAAK,EAAL,CAAQ,CAAZ,GAAgB,CAAjB,IAAuB,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,EAAL,CAAQ,KAA3C,CAAhB;AACA,QAAI,CAAC,GAAiB,IAAI,MAAJ,CAAuB,IAAK,CAAC,CAA7B,EAAgC,CAAhC,CAAtB;AACA,QAAI,CAAJ;AACA,QAAI,CAAJ;;AACA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,CAA5B,EAA+B,EAAE,CAAjC,EAAoC;AACnC,MAAA,CAAC,GAAG,CAAJ;AACA,MAAA,CAAC,GAAG,CAAJ;;AACA,aAAO,CAAC,GAAG,CAAX,EAAc;AACb,QAAA,CAAC,GAAG,CAAC,GAAG,CAAR;AACA;;AACD,aAAO,CAAC,GAAG,CAAC,GAAG,CAAf,EAAkB;AACjB,QAAA,CAAC,GAAI,CAAC,GAAG,CAAT;AACA;;8BACQ,C,EAAC;AACT,YAAI,CAAC,GAAW,MAAA,CAAK,EAAL,CAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAhB;;AACA,YAAI,CAAC,IAAI,CAAT,EAAY;AACX,UAAA,CAAC,CAAC,GAAF,CAAM,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAN;AACA,UAAA,MAAA,CAAK,EAAL,CAAQ,QAAR,CAAiB,CAAjB;AACA,SAHD,MAGO;AACN,UAAA,CAAC,CAAC,GAAF,CAAQ,YAAA;AACP,gBAAI,IAAI,GAAG,IAAI,IAAJ,EAAX;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,CAAT;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,CAAT;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,CAAT;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,CAAT;AACA,mBAAO,IAAP;AACA,WAPM,EAAP;AAQA;;;;;AAdF,WAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,CAA5B,EAA+B,EAAE,CAAjC,EAAkC;gBAAzB,C;AAeR;AACD;;AACD,SAAK,EAAL,CAAQ,CAAR,GAAY,IAAZ;AACA,SAAK,EAAL;AACA,SAAK,EAAL,GAAU,CAAV;;4BACS,C,EAAC;AACT,UAAI,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,IAA3B,EAAiC;AAChC,QAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,MAAA,CAAK,EAAL,CAAQ,CAAR,EAAtB;AACA,QAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,QAApB,GAA+B,CAA/B;AACA,QAAA,MAAA,CAAK,EAAL,CAAQ,EAAR,CAAW,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA7B;AACA,YAAI,CAAC,GAAoB,MAAA,CAAK,EAAL,CAAQ,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAR,CAAzB;;AACA,YAAI,CAAC,IAAI,IAAT,EAAe;AACd,UAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,EAApB,GAAyB,CAAzB;AACA,SAFD,MAEO;AACN,cAAI,CAAC,GAAoB,IAAzB;;AACA,cAAI,CAAC,GAAW,YAAA;AACf,gBAAI,IAAI,GAAG,IAAI,IAAJ,EAAX;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,KAAI,CAAC,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA3B;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,KAAI,CAAC,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA3B;AACA,YAAA,IAAI,CAAC,CAAL,GAAS,KAAI,CAAC,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA3B;AACA,mBAAO,IAAP;AACA,WANc,EAAf;;AAOA,iBAAO,CAAC,CAAC,CAAF,IAAO,CAAP,IAAY,CAAC,IAAI,IAAxB,EAA8B;AAC7B,YAAA,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAF,IAAO,CAAb;AACA,YAAA,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAF,IAAO,CAAb;AACA,YAAA,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAF,GAAM,CAAZ;AACA,YAAA,CAAC,GAAG,MAAA,CAAK,EAAL,CAAQ,CAAR,CAAJ;AACA;;AACD,cAAI,CAAC,IAAI,IAAT,EAAe;AACd,gBAAI,EAAE,GAAmB,QAAQ,CAAC,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,CAAC,CAAC,CAApC,CAAD,CAAjC;AACA,gBAAI,EAAE,GAAW,SAAS,CAAC,GAAD,EAAM,EAAN,CAA1B;AACA,gBAAI,EAAE,GAAW,EAAE,IAAI,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,EAA1B,CAAnB;AACA,gBAAI,EAAE,GAAW,EAAE,IAAI,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,EAA1B,CAAnB;AACA,YAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,MAAA,CAAK,EAAL,CAAQ,CAAR,EAAtB;AACA,YAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,QAApB,GAA+B,CAA/B;AACA,YAAA,MAAA,CAAK,EAAL,CAAQ,EAAR,CAAW,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA7B;AACA,YAAA,CAAC,GAAG,MAAA,CAAK,EAAL,CAAQ,CAAR,CAAU,EAAV,EAAc,CAAd,EAAiB,EAAjB,EAAqB,EAArB,CAAJ;AACA,YAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,EAApB,GAAyB,CAAzB;AACA;;AACD,UAAA,MAAA,CAAK,EAAL,CAAQ,CAAR,CAAU,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAV;AACA;AACD;;AACD,UAAI,EAAE,GAAW,MAAA,CAAK,EAAL,CAAQ,CAAR,GAAY,CAA7B;AACA,UAAI,EAAE,GAAW,MAAA,CAAK,EAAL,CAAQ,CAAR,GAAY,CAA7B;AACA,UAAI,EAAE,GAAW,CAAC,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,CAAtB,GAA0B,CAA3B,IAAgC,EAAjD;AACA,UAAI,EAAE,GAAW,CAAC,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,CAAtB,GAA0B,CAA3B,IAAgC,EAAjD;AACA,MAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,KAApB,GAA4B,EAAE,GAAG,GAAjC;AACA,MAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,MAApB,GAA6B,EAAE,GAAG,GAAlC;AACA,MAAA,MAAA,CAAK,EAAL,CAAQ,EAAR,CAAW,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA7B,EAAgC,EAAhC,EAAoC,EAApC;;AACA,UAAI,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,IAA3B,EAAiC;AAChC,QAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,KAApB,GAA4B,EAAE,GAAG,GAAjC;AACA,QAAA,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,MAApB,GAA6B,EAAE,GAAG,GAAlC;AACA,QAAA,MAAA,CAAK,EAAL,CAAQ,EAAR,CAAW,MAAA,CAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA7B,EAAgC,EAAhC,EAAoC,EAApC;AACA;;;;;AAhDF,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,EAAL,CAAQ,KAApC,EAA2C,EAAE,CAA7C,EAA8C;cAArC,C;AAiDR;;AACD,SAAK,EAAL,CAAQ,CAAR,GAAY,KAAZ;AACA,SAAK,EAAL,CAAQ,EAAR;AACA,GAlHD;;AAoHA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,EAAL,IAAW,IAAX,IAAmB,CAAC,KAAK,EAAL,CAAQ,CAAR,EAApB,IAAmC,KAAK,EAAL,CAAQ,KAAR,IAAiB,CAApD,IAAyD,KAAK,EAAL,CAAQ,MAAR,IAAkB,CAA/E,EAAkF;AACjF;AACA;;AACD,QAAI,KAAK,EAAT,EAAa;AACZ;AACA;;AACD,SAAK,EAAL,GAAU,IAAV;AACA,SAAK,EAAL,CAAQ,CAAR,CAAU,KAAK,CAAC,IAAD,EAAO,KAAK,EAAZ,CAAf;AACA,GATD;;AAUQ,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,EAAL,CAAQ,KAApC,EAA2C,EAAE,CAA7C,EAAgD;AAC/C,WAAK,EAAL,CAAQ,CAAR,CAAU,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAV;AACA,WAAK,EAAL,CAAQ,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,CAAR;;AACA,UAAI,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,IAA3B,EAAiC;AAChC,aAAK,EAAL,CAAQ,CAAR,CAAU,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA5B;AACA,aAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,EAApB,GAAyB,IAAzB;AACA,aAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,IAAtB;AACA;AACD;AACD,GAVO;;AAWA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,YAAA;AACC,SAAK,EAAL,CAAQ,CAAR;AACA,GAFO;;AAGA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAkB;AACjB,WAAO,KAAK,EAAL,CAAQ,IAAR,CAAa,CAAb,CAAP;AACA,GAFO;;AAGR,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAY,CAAZ,EAA8B;AAC7B,SAAK,EAAL,CAAQ,IAAR,CAAa,CAAb,EAAgB,CAAhB;AACA,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAY,kBAAA,CAAA,SAAZ,EAAY,IAAZ,EAAc;SAAd,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFa;SAGd,UAAe,CAAf,EAAmD;AAClD,WAAK,EAAL,GAAU,CAAV;AACA,KALa;qBAAA;;AAAA,GAAd;;AAOA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,WAAO,KAAK,EAAL,CAAQ,KAAR,IAAiB,CAAxB;AACA,GAFD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,CAAC,GAAG,IAAR;;AACA,QAAI,KAAK,EAAL,EAAJ,EAAe;AACd,MAAA,CAAC,GAAG,KAAJ;AACA;;AACD,QAAI,CAAC,KAAK,EAAL,CAAQ,CAAR,EAAL,EAAkB;AACjB,MAAA,CAAC,GAAG,KAAJ;AACA;;AACD,QAAI,CAAC,IAAI,CAAC,KAAK,EAAf,EAAmB;AAClB,UAAI,KAAK,eAAL,IAAwB,IAA5B,EAAkC;AACjC,aAAK,eAAL,CAAqB,IAArB,EAA2B,IAAI,SAAJ,EAA3B;AACA;AACD;;AACD,SAAK,EAAL,GAAU,CAAV;AACA,GAdD;;AAeA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAU;AACT,QAAI,CAAC,CAAC,CAAF,IAAO,IAAX,EAAiB;AAChB,MAAA,CAAC,CAAC,CAAF,GAAM,OAAO,EAAb;AACA,WAAK,EAAL,CAAQ,GAAR,CAAY,CAAZ;AACA,WAAK,EAAL,CAAQ,EAAR;AACA,KAJD,MAIO;AACN,WAAK,EAAL;AACA;AACD,GARD;;AASQ,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAR,UAAW,CAAX,EAAkB;AACjB,QAAI,CAAC,CAAC,CAAF,IAAO,IAAX,EAAiB;AAChB,WAAK,EAAL,CAAQ,CAAR,CAAU,CAAC,CAAC,CAAZ;AACA,MAAA,CAAC,CAAC,CAAF,CAAI,EAAJ,GAAS,IAAT;AACA,MAAA,CAAC,CAAC,CAAF,GAAM,IAAN;;AACA,WAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,EAAL,CAAQ,KAApC,EAA2C,EAAE,CAA7C,EAAgD;AAC/C,YAAI,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,KAAqB,CAAzB,EAA4B;AAC3B,eAAK,EAAL,CAAQ,QAAR,CAAiB,CAAjB;AACA;AACA;AACD;;AACD,UAAI,KAAK,EAAL,CAAQ,KAAR,IAAiB,CAArB,EAAwB;AACvB,aAAK,EAAL,CAAQ,EAAR;AACA;AACD;AACD,GAfO;;AAgBR,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,CAAC,GAAS,OAAO,EAArB;AACA,QAAI,CAAC,GAAW,GAAhB;;AACA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,KAAK,EAAL,CAAQ,KAApC,GAA6C;AAC5C,UAAI,CAAC,GAAG,CAAC,CAAC,OAAF,KAAc,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,OAApB,EAAtB;;AACA,UAAI,CAAC,GAAW,CAAC,GAAG,IAApB;AACA,UAAI,CAAC,GAAY,CAAD,GAAM,CAAtB;AACA,MAAA,CAAC,GAAG,QAAQ,CAAC,CAAT,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAJ;AACA,WAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,QAApB,GAA+B,IAAI,CAAnC;;AACA,UAAI,CAAC,IAAI,CAAT,EAAY;AACX,aAAK,EAAL,CAAQ,CAAR,CAAU,KAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAA5B;AACA,aAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAAoB,EAApB,GAAyB,IAAzB;AACA,aAAK,EAAL,CAAQ,MAAR,CAAe,CAAf,EAAkB,CAAlB,GAAsB,IAAtB;AACA,aAAK,EAAL,CAAQ,QAAR,CAAiB,CAAjB;AACA,OALD,MAKO;AACN,UAAE,CAAF;AACA;;AACD,WAAK,EAAL,CAAQ,CAAR;AACA;;AACD,QAAI,KAAK,EAAL,CAAQ,KAAR,IAAiB,CAArB,EAAwB;AACvB,WAAK,EAAL,CAAQ,EAAR;AACA;AACD,GAtBD;;AAwBA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,SAAK,EAAL,GAAU,KAAK,EAAf;AACA,SAAK,EAAL,GAAU,KAAK,EAAf;AACA,SAAK,EAAL;AACA,GAJD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAS;AACR,QAAI,CAAC,GAAqB,CAA1B;AACA,SAAK,EAAL,CAAQ,CAAR,CAAU,CAAV;AACA,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX;AACA,GAJD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAsB;AACrB,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX;AACA,GAFD;;AAGA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAiB;AAChB,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX;AACA,GAFD;;AAGA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAU;AACT,SAAK,EAAL,CAAQ,EAAR,CAAW,CAAX;AACA,GAFD;;AAIA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,QAAI,KAAK,aAAL,IAAsB,IAA1B,EAAgC;AAC/B,WAAK,aAAL,CAAmB,IAAnB,EAAyB,IAAI,SAAJ,EAAzB;AACA;AACD,GAJD;;AAMA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,YAAA;AACC,SAAK,EAAL,GAAU,KAAV;AACA,GAFD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAyC;AACxC,QAAI,KAAK,gBAAL,IAAyB,IAA7B,EAAmC;AAClC,WAAK,gBAAL,CAAsB,IAAtB,EAA4B,CAA5B;AACA;AACD,GAJD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAwC;AACvC,QAAI,KAAK,eAAL,IAAwB,IAA5B,EAAkC;AACjC,WAAK,eAAL,CAAqB,IAArB,EAA2B,CAA3B;AACA;AACD,GAJD;;AAMA,EAAA,MAAA,CAAA,cAAA,CAAI,kBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAZ;AACA,KAFK;qBAAA;;AAAA,GAAN;;AAGA,EAAA,kBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,CAAH,EAAY;AACX,SAAK,EAAL,GAAU,CAAV;AACA,GAFD;;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,kBAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,YAAA;AACC,aAAO,KAAK,EAAL,CAAQ,CAAf;AACA,KAFK;SAGN,UAAO,CAAP,EAAgB;AACf,UAAI,CAAC,GAAY,CAAC,IAAI,KAAK,EAA3B;;AACA,UAAI,CAAJ,EAAO;AACN,aAAK,EAAL,GAAU,IAAI,UAAJ,CAA4C,IAAK,CAAC,CAAlD,EAA2D,eAAgB,CAAC,CAA5E,EAA+E,CAA/E,EAAkF,CAAlF,EAAqF,IAAI,oBAAJ,EAArF,CAAV;AACA;AACD,KARK;qBAAA;;AAAA,GAAN;AA9ZO,EAAA,kBAAA,CAAA,EAAA,GAAW,QAAQ,CAAC,kBAAD,EAAqB,oBAArB,EAAiD,OAAQ,CAAC,CAA1D,EAA6D,CAAC,4BAAD,CAA7D,CAAnB;AAuaA,EAAA,kBAAA,CAAA,GAAA,GAAgB,OAAO,CAAC,kBAAD,EAAqB,gBAArB,EAAuC,kBAAvC,EAA2D,IAA3D,EAAiE,CAAE,uCAAF,EAA2C,CAAE,CAAF,EAAK,KAAL,CAA3C,EAAyD,eAAzD,EAA0E,CAAE,CAAF,EAAK,IAAL,CAA1E,EAAuF,cAAvF,EAAuG,CAAQ,uBAAwB,CAAC,CAAjC,EAAoC,IAApC,CAAvG,EAAmJ,6BAAnJ,EAAkL,CAAE,qBAAF,EAAyB,IAAzB,CAAlL,EAAmN,iBAAnN,EAAsO,CAAE,CAAF,EAAK,IAAL,CAAtO,EAAmP,kBAAnP,EAAuQ,CAAE,CAAF,EAAK,KAAL,CAAvQ,EAAqR,sBAArR,EAA6S,CAAE,WAAF,EAAsB;AAAE,IAAA,KAAK,EAAE,WAAT;AAAsB,IAAA,CAAC,EAAE,CAAzB;AAA4B,IAAA,CAAC,EAAE;AAA/B,GAAtB,CAA7S,EAAyW,qBAAzW,EAAgY,CAAE,CAAF,EAAK,CAAL,CAAhY,CAAjE,CAAvB;AACR,SAAA,kBAAA;AAAC,CAzaD,CAAwC,OAAxC,CAAA;;SAAa,kB","sourceRoot":"","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Delegate_$type, markType, typeCast, INotifyPropertyChanged_$type, PropertyChangedEventArgs, EventArgs, Point_$type, markDep } from \"./type\";\nimport { ISchedulableRender_$type } from \"./ISchedulableRender\";\nimport { List$1 } from \"./List$1\";\nimport { Image } from \"./Image\";\nimport { RenderingContext } from \"./RenderingContext\";\nimport { StackPool$1 } from \"./StackPool$1\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { Tile } from \"./Tile\";\nimport { Rect } from \"./Rect\";\nimport { CanvasRenderScheduler } from \"./CanvasRenderScheduler\";\nimport { WriteableBitmap } from \"./WriteableBitmap\";\nimport { Uri } from \"./Uri\";\nimport { CancellingMultiScaleImageEventArgs } from \"./CancellingMultiScaleImageEventArgs\";\nimport { DownloadingMultiScaleImageEventArgs } from \"./DownloadingMultiScaleImageEventArgs\";\nimport { CanvasViewRenderer } from \"./CanvasViewRenderer\";\nimport { truncate, intDivide, logBase } from \"./number\";\nimport { DependencyObject } from \"./DependencyObject\";\nimport { Control } from \"./Control\";\nimport { DependencyProperty } from \"./DependencyProperty\";\nimport { IEasingFunction_$type } from \"./IEasingFunction\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { TilePositionComparer } from \"./TilePositionComparer\";\nimport { Convert } from \"./Convert\";\nimport { MathUtil } from \"./MathUtil\";\nimport { PropertyMetadata } from \"./PropertyMetadata\";\nimport { stringIsNullOrEmpty } from \"./string\";\nimport { dateNow } from \"./date\";\n/**\n * @hidden\n */\nvar XamMultiScaleImageView = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleImageView, _super);\n    function XamMultiScaleImageView(a) {\n        var _this = _super.call(this) || this;\n        _this.b = null;\n        _this.h = null;\n        _this.g = new Dictionary$2(Base.$, List$1.$.specialize(Delegate_$type), 0);\n        _this.j = new List$1(Tile.$, 0);\n        _this.i = new List$1(Tile.$, 0);\n        _this.p = -1;\n        _this.o = -1;\n        _this.k = null;\n        _this.m = null;\n        _this.c = null;\n        _this._isDirty = false;\n        _this.au = Rect.empty;\n        _this.l = null;\n        _this.b = a;\n        _this.b.ag.l(_this);\n        _this.h = new List$1(Image.$, 0);\n        _this.b.ap = ((function () {\n            var $ret = new StackPool$1(Image.$);\n            $ret.j = runOn(_this, _this.at);\n            $ret.b = runOn(_this, _this.y);\n            $ret.c = runOn(_this, _this.aa);\n            $ret.d = runOn(_this, _this.z);\n            return $ret;\n        })());\n        for (var b = 0; b < 4; ++b) {\n            _this.i.add(null);\n        }\n        return _this;\n    }\n    XamMultiScaleImageView.prototype.at = function () {\n        return new Image();\n    };\n    XamMultiScaleImageView.prototype.y = function (a) {\n        this.h.add(a);\n    };\n    XamMultiScaleImageView.prototype.aa = function (a) {\n        this.h.remove(a);\n    };\n    XamMultiScaleImageView.prototype.z = function (a) {\n    };\n    XamMultiScaleImageView.prototype.ao = function (a, b, c) {\n        a.n = b;\n        a.o = c;\n    };\n    XamMultiScaleImageView.prototype.r = function (a) {\n        var _loop_1 = function (b) {\n            if (a == this_1.i._inner[b]) {\n                if (a.i != null && a.i.ac != null) {\n                    var c = a.i.ac;\n                    var d_1 = c.c;\n                    var e_1 = this_1.b.ao.w(a.f + 8, a.d, a.e);\n                    if (e_1 != null) {\n                        var f = ((function () {\n                            var $ret = new CancellingMultiScaleImageEventArgs();\n                            $ret.uri = e_1.value;\n                            $ret.image = d_1;\n                            return $ret;\n                        })());\n                        this_1.b.bu(f);\n                    }\n                    if (this_1.g.containsKey(d_1)) {\n                        var g = this_1.g.item(d_1);\n                        for (var h = 0; h < g.count; h++) {\n                            g._inner[h]();\n                        }\n                        g.clear();\n                        this_1.g.removeItem(d_1);\n                    }\n                }\n                this_1.i._inner[b] = null;\n                this_1.q();\n                return { value: void 0 };\n            }\n        };\n        var this_1 = this;\n        for (var b = 0; b < this.i.count; ++b) {\n            var state_1 = _loop_1(b);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        for (var i = 0; i < this.j.count; ++i) {\n            if (this.j._inner[i] == a) {\n                this.j.removeAt(i);\n                break;\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.u = function (a) {\n        this.j.add(a);\n        this.j.aa(function (b, c) {\n            var d = 0;\n            var e = 0;\n            if (b.h != null) {\n                d = b.h.ac.b;\n            }\n            if (c.h != null) {\n                e = c.h.ac.b;\n            }\n            if (d < e) {\n                return -1;\n            }\n            else if (d > e) {\n                return 1;\n            }\n            return 0;\n        });\n        this.q();\n    };\n    XamMultiScaleImageView.prototype.q = function () {\n        var _this = this;\n        var index_ = -1;\n        if (this.l == null) {\n            return;\n        }\n        if (this.j.count > 0) {\n            for (var a = 0; a < this.i.count; ++a) {\n                if (this.i._inner[a] == null) {\n                    index_ = a;\n                    break;\n                }\n            }\n        }\n        if (index_ >= 0) {\n            this.i._inner[index_] = this.j._inner[0];\n            var b = new WriteableBitmap(this.b.ao.r, this.b.ao.p);\n            this.i._inner[index_].i.ac = b;\n            var ele_ = this.l.createElement(\"img\");\n            var c_1 = ele_.getNativeElement();\n            b.c = c_1;\n            var self_ = this;\n            var d = new List$1(Delegate_$type, 0);\n            this.g.addItem(c_1, d);\n            d.add(ele_.listen(\"load\", function (e) { return _this.ab(e, index_); }));\n            d.add(ele_.listen(\"readystatechange\", function (e) { return _this.ab(e, index_); }));\n            d.add(ele_.listen(\"error\", function (e) { return _this.ac(e, index_); }));\n            this.j.removeAt(0);\n            var e = this.b.ao.w(this.i._inner[index_].f + 8, this.i._inner[index_].d, this.i._inner[index_].e);\n            if (e == null) {\n                return;\n            }\n            var f_1 = e.value;\n            var g = ((function () {\n                var $ret = new DownloadingMultiScaleImageEventArgs();\n                $ret.uri = f_1;\n                $ret.image = c_1;\n                return $ret;\n            })());\n            this.b.bv(g);\n            f_1 = g.uri;\n            if (f_1 != null) {\n                c_1.src = f_1;\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.ab = function (a, b) {\n        var e_ = a.originalEvent;\n        var img_ = (e_.target);\n        var c = (img_.complete || (img_.readyState == 'complete' && e_.type == 'readystatechange'));\n        if (c) {\n            this.downloadCompleted(a, b);\n        }\n    };\n    XamMultiScaleImageView.prototype.ac = function (a, b) {\n        this.downloadError(a, b);\n    };\n    XamMultiScaleImageView.prototype.downloadError = function (a, b) {\n        var c = this.i._inner[b];\n        this.i._inner[b] = null;\n        if (c != null && c.i != null && c.i.ac != null) {\n            var e_ = a.originalEvent;\n            var d = (e_.target);\n            if (this.g.containsKey(d)) {\n                var e = this.g.item(d);\n                for (var f = 0; f < e.count; f++) {\n                    e._inner[f]();\n                }\n                e.clear();\n                this.g.removeItem(d);\n            }\n        }\n        this.q();\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.downloadCompleted = function (a, b) {\n        var c = this.i._inner[b];\n        var d = true;\n        if (c != null && c.i != null && c.i.ac != null) {\n            d = false;\n            var ele_ = c.i.ac.c;\n            if (!ele_.complete) {\n                d = true;\n            }\n            if ((ele_.width == 0 && ele_.height == 0)) {\n                d = true;\n            }\n        }\n        this.i._inner[b] = null;\n        if (d) {\n            this.q();\n            this.ad();\n            return;\n        }\n        var e_ = a.originalEvent;\n        var e = (e_.target);\n        if (this.g.containsKey(e)) {\n            var f = this.g.item(e);\n            for (var g = 0; g < f.count; g++) {\n                f._inner[g]();\n            }\n            f.clear();\n            this.g.removeItem(e);\n        }\n        this.b.bo(c, c.i.ac);\n        if (c.i != null) {\n            this.b.ca(c);\n        }\n        this.q();\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.a = function (a, b, c, d) {\n        var e = new WriteableBitmap(a, a);\n        e.c = b.c;\n        if (!b.d.isEmpty) {\n            c += truncate(Math.round(b.d.left));\n            d += truncate(Math.round(b.d.top));\n        }\n        e.d = new Rect(0, c, d, a, a);\n        return e;\n    };\n    XamMultiScaleImageView.prototype.am = function (a) {\n        a.s = 0;\n    };\n    XamMultiScaleImageView.prototype.an = function (a) {\n        a.s = 1;\n    };\n    XamMultiScaleImageView.prototype.f = function () {\n        return true;\n    };\n    XamMultiScaleImageView.prototype.s = function (a) {\n        if (this.b.al != null) {\n            this.b.al.deferredRefresh();\n        }\n        else {\n            if (this.k != null) {\n                this.k.setTimeout(a, 0);\n            }\n            else {\n                window.setTimeout(a, 0);\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.aq = function () {\n        if (this.p == -1) {\n            this.p = window.setInterval(runOn(this.b, this.b.b9), 50);\n        }\n    };\n    XamMultiScaleImageView.prototype.as = function () {\n        if (this.p != -1) {\n            window.clearInterval(this.p);\n            this.p = -1;\n        }\n    };\n    XamMultiScaleImageView.prototype.ap = function () {\n        if (this.o == -1) {\n            this.o = window.setInterval(runOn(this.b, this.b.br), 50);\n        }\n    };\n    XamMultiScaleImageView.prototype.ar = function () {\n        if (this.o != -1) {\n            window.clearInterval(this.o);\n            this.o = -1;\n        }\n    };\n    XamMultiScaleImageView.prototype.t = function () {\n        if (this.p != -1) {\n            this.ar();\n            this.b.by();\n        }\n    };\n    XamMultiScaleImageView.prototype.ae = function (a) {\n        this.k = a;\n        this.k.rootWrapper.setStyleProperty(\"position\", \"relative\");\n        this.m = this.k.createElement(\"canvas\");\n        this.m.setStyleProperty(\"position\", \"absolute\");\n        this.m.setStyleProperty(\"top\", \"0px\");\n        this.m.setStyleProperty(\"left\", \"0px\");\n        this.k.append(this.m);\n        this.c = new RenderingContext(new CanvasViewRenderer(), this.k.get2DCanvasContext(this.m));\n        this.af(this.k.rootWrapper.width(), this.k.rootWrapper.height());\n    };\n    XamMultiScaleImageView.prototype.af = function (a, b) {\n        this.m.setAttribute(\"width\", truncate((a * this.b.a4)).toString());\n        this.m.setAttribute(\"height\", truncate((b * this.b.a4)).toString());\n        this.m.setStyleProperty(\"width\", a.toString() + \"px\");\n        this.m.setStyleProperty(\"height\", b.toString() + \"px\");\n        this.b.cn = new Rect(0, 0, 0, a, b);\n        this.b.b5();\n    };\n    XamMultiScaleImageView.prototype.aj = function () {\n        this.ad();\n    };\n    Object.defineProperty(XamMultiScaleImageView.prototype, \"index\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImageView.prototype.postRender = function () {\n    };\n    Object.defineProperty(XamMultiScaleImageView.prototype, \"isDirty\", {\n        get: function () {\n            return this._isDirty;\n        },\n        set: function (a) {\n            this._isDirty = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImageView.prototype.ad = function () {\n        if (this.c == null) {\n            return;\n        }\n        if (!this.isDirty) {\n            this.isDirty = true;\n            this.b.ag.n();\n        }\n    };\n    XamMultiScaleImageView.prototype.undirty = function (a) {\n        this.isDirty = false;\n        this.ak();\n    };\n    XamMultiScaleImageView.prototype.ak = function () {\n        if (this.c == null) {\n            return;\n        }\n        if (this.c.d && this.b.a4 != 1) {\n            this.c.z();\n            this.c.aa(this.b.a4, this.b.a4);\n        }\n        if (!this.au.isEmpty) {\n            this.c.k(this.au.left, this.au.top, this.au.width, this.au.height);\n        }\n        this.au = this.b.cn;\n        for (var a = 0; a < this.h.count; a++) {\n            var b = this.h._inner[a];\n            if (b.s == 0) {\n                this.al(b);\n            }\n        }\n        for (var c = 0; c < this.h.count; c++) {\n            var d = this.h._inner[c];\n            if (d.s == 1) {\n                this.al(d);\n            }\n        }\n        if (this.c.d && this.b.a4 != 1) {\n            this.c.y();\n        }\n        this.b.bt();\n        this.b.bw();\n    };\n    XamMultiScaleImageView.prototype.d = function () {\n        var a = true;\n        for (var b = 0; b < this.i.count; b++) {\n            if (this.i._inner[b] != null) {\n                a = false;\n            }\n        }\n        return a;\n    };\n    XamMultiScaleImageView.prototype.al = function (a) {\n        if (this.c == null) {\n            return;\n        }\n        var b = a.ac;\n        var c = a._opacity * this.b._opacity;\n        if (b == null || b.c == null) {\n            return;\n        }\n        if (this.e(b.c)) {\n            return;\n        }\n        if (!b.d.isEmpty) {\n            if (b.d.width < 1 || b.d.height < 1) {\n                return;\n            }\n            this.c.n(b.c, c, b.d.left, b.d.top, b.d.width, b.d.height, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n        }\n        else {\n            this.c.m(b.c, c, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n        }\n    };\n    XamMultiScaleImageView.prototype.e = function (a) {\n        var img_ = a;\n        if (!img_.complete) {\n            return true;\n        }\n        if ((img_.width == 0 && img_.height == 0)) {\n            return true;\n        }\n        return false;\n    };\n    XamMultiScaleImageView.prototype.x = function () {\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.ag = function (a) {\n        this.c = a;\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.ah = function (a) {\n        this.l = a;\n        this.q();\n    };\n    XamMultiScaleImageView.prototype.ai = function (a) {\n        this.b.cn = a;\n        this.b.b5();\n    };\n    XamMultiScaleImageView.prototype.preRender = function () {\n    };\n    XamMultiScaleImageView.prototype.isValid = function () {\n        return true;\n    };\n    XamMultiScaleImageView.$t = markType(XamMultiScaleImageView, 'XamMultiScaleImageView', Base.$, [ISchedulableRender_$type]);\n    return XamMultiScaleImageView;\n}(Base));\nexport { XamMultiScaleImageView };\n/**\n * @hidden\n */\nvar XamMultiScaleTileSource = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleTileSource, _super);\n    function XamMultiScaleTileSource(a, b, c, d, e) {\n        var _this = _super.call(this) || this;\n        _this.t = 0;\n        _this.s = 0;\n        _this.n = 1;\n        _this.l = false;\n        _this.r = 0;\n        _this.p = 0;\n        _this.q = 0;\n        _this.j = null;\n        _this.t = a;\n        _this.s = b;\n        _this.r = c;\n        _this.p = d;\n        _this.q = e;\n        return _this;\n    }\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"v\", {\n        get: function () {\n            return this.t;\n        },\n        set: function (a) {\n            this.t = a;\n            this.y(0, 0, 0, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"u\", {\n        get: function () {\n            return this.s;\n        },\n        set: function (a) {\n            this.s = a;\n            this.y(0, 0, 0, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"o\", {\n        get: function () {\n            return this.n;\n        },\n        set: function (a) {\n            this.n = a;\n            if (this.k != null) {\n                this.k._opacity = this.n;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"m\", {\n        get: function () {\n            return this.l;\n        },\n        set: function (a) {\n            this.l = a;\n            if (this.k != null) {\n                this.k.av = this.l;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"k\", {\n        get: function () {\n            return this.j;\n        },\n        set: function (a) {\n            this.j = a;\n            if (this.j != null) {\n                this.j._opacity = this.o;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleTileSource.prototype.w = function (a, b, c) {\n        var d = new List$1(Base.$, 0);\n        this.x(a, b, c, d);\n        var e = null;\n        if (d.count > 0) {\n            e = typeCast(Uri.$, d._inner[0]);\n        }\n        return e;\n    };\n    XamMultiScaleTileSource.prototype.y = function (a, b, c, d) {\n        if (this.k != null) {\n            this.k.bs(a, b, c, d);\n        }\n    };\n    XamMultiScaleTileSource.$t = markType(XamMultiScaleTileSource, 'XamMultiScaleTileSource', DependencyObject.$);\n    return XamMultiScaleTileSource;\n}(DependencyObject));\nexport { XamMultiScaleTileSource };\n/**\n * @hidden\n */\nvar XamMultiScaleImage = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleImage, _super);\n    function XamMultiScaleImage() {\n        var _this = _super.call(this) || this;\n        _this.ap = null;\n        _this.an = null;\n        _this.ak = null;\n        _this.ck = null;\n        _this.a2 = 0;\n        _this.at = false;\n        _this.propertyChanged = null;\n        _this.ba = 0;\n        _this.bb = 0;\n        _this.a0 = new Date();\n        _this.cl = null;\n        _this.a3 = 0;\n        _this.ay = new List$1(Tile.$, 0);\n        _this.aw = false;\n        _this.aq = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, 0x7FFFFFFF, new TilePositionComparer());\n        _this.az = new List$1(Tile.$, 0);\n        _this.imageTilesReady = null;\n        _this.as = false;\n        _this.cn = null;\n        _this.ag = null;\n        _this.imagesChanged = null;\n        _this.downloadingImage = null;\n        _this.cancellingImage = null;\n        _this.a1 = 1;\n        _this.cn = Rect.empty;\n        _this.ag = new CanvasRenderScheduler();\n        _this.an = new XamMultiScaleImageView(_this);\n        _this.ab = XamMultiScaleImage.$;\n        _this.ck = _this.cm;\n        _this.a2 = _this.a5;\n        return _this;\n    }\n    Object.defineProperty(XamMultiScaleImage.prototype, \"al\", {\n        get: function () {\n            return this.ak;\n        },\n        set: function (a) {\n            if (this.ak != null) {\n                this.ak.unRegister(this);\n            }\n            this.ak = a;\n            if (this.ak != null) {\n                this.ak.register(this, runOn(this, this.b6));\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.bc = function () {\n        if (!stringIsNullOrEmpty(this.bf)) {\n            return this.bf;\n        }\n        return null;\n    };\n    XamMultiScaleImage.prototype.bd = function () {\n        if (!stringIsNullOrEmpty(this.bj)) {\n            return this.bj;\n        }\n        return null;\n    };\n    XamMultiScaleImage.prototype.bx = function (a, b, c) {\n        var d = new PropertyChangedEventArgs(a);\n        if (this.propertyChanged != null) {\n            this.propertyChanged(this, d);\n        }\n        switch (a) {\n            case XamMultiScaleImage.$$p[2]:\n                if (this.ao != null) {\n                    this.ao.k = this;\n                }\n                this.b4();\n                this.b7();\n                this.b5();\n                break;\n            case XamMultiScaleImage.$$p[6]:\n                this.b8();\n                break;\n            case XamMultiScaleImage.$$p[7]:\n                this.b8();\n                break;\n            case XamMultiScaleImage.$$p[5]:\n                if (!this.ax) {\n                    this.an.t();\n                }\n                break;\n            case XamMultiScaleImage.$$p[0]:\n                this.at = this.av;\n                this.b5();\n                break;\n        }\n    };\n    XamMultiScaleImage.prototype.v = function () {\n        _super.prototype.v.call(this);\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b7 = function () {\n        this.cb();\n        if (this.ao != null) {\n            this.ba = Convert.toInt32(logBase(this.ao.r, 2));\n            this.bb = Convert.toInt32(logBase(this.ao.v, 2));\n        }\n    };\n    XamMultiScaleImage.prototype.bs = function (a, b, c, d) {\n        this.b4();\n        this.b7();\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b8 = function () {\n        if (this.ax) {\n            this.a0 = dateNow();\n            this.cl = this.ck;\n            this.a3 = this.a2;\n            this.an.aq();\n        }\n        else {\n            this.ck = this.cm;\n            this.a2 = this.a5;\n            this.b5();\n        }\n    };\n    XamMultiScaleImage.prototype.b9 = function () {\n        var a = 2;\n        var b = dateNow().getTime() - this.a0.getTime();\n        var c = b / 1000;\n        var d = MathUtil.b((c) / a, 0, 1);\n        var e = this.aj != null ? this.aj.ease(d) : d;\n        var f = 1 - e;\n        this.a2 = this.a3 * f + this.a5 * e;\n        this.ck = { $type: Point_$type, x: this.cl.x * f + this.cm.x * e, y: this.cl.y * f + this.cm.y * e };\n        if (d >= 1) {\n            this.an.as();\n        }\n        else {\n        }\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.a8 = function (a, b, c, d) {\n        for (var e = 0; e < this.ay.count; ++e) {\n            if (this.ay._inner[e].c == a && this.ay._inner[e].d == b && this.ay._inner[e].e == c && this.ay._inner[e].f == d) {\n                return e;\n            }\n        }\n        return -1;\n    };\n    XamMultiScaleImage.prototype.b6 = function (a) {\n        var _this = this;\n        this.aw = false;\n        this.as = false;\n        var b = this.at;\n        if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n            return;\n        }\n        var c = truncate(Math.ceil(this.cn.width / this.ao.r));\n        var d = truncate(Math.max(1, Math.floor(-logBase(this.a2 / c, 2))));\n        if (d >= this.bb - 8) {\n            d = (this.bb - 8) - 1;\n        }\n        var e = truncate(Math.round(Math.pow(2, d)));\n        var f = this.a2;\n        var g = this.cn.height * f / this.cn.width;\n        var h = this.ao.v / Math.pow(2, d);\n        var i = this.ao.u / Math.pow(2, d);\n        var j = truncate(Math.floor((this.ck.x * this.ao.v) / h));\n        var k = truncate(Math.ceil(((this.ck.x + f) * this.ao.v) / h));\n        var l = truncate(Math.floor((this.ck.y * this.ao.u) / i));\n        var m = truncate(Math.ceil(((this.ck.y + g) * this.ao.v) / i));\n        if (!b) {\n            j = Math.max(j, 0);\n            k = Math.min(k, e);\n        }\n        l = Math.max(l, 0);\n        m = Math.min(m, e);\n        var n = ((j * h) - (this.ck.x * this.ao.v)) / h;\n        var o = ((l * i) - (this.ck.y * this.ao.u)) / i;\n        var p = (f * this.ao.v / h) * (this.ao.r / this.cn.width);\n        var q = new List$1(Tile.$, 0);\n        var r;\n        var s;\n        for (var t = j; t < k; ++t) {\n            r = t;\n            s = t;\n            while (s < 0) {\n                s = e + s;\n            }\n            while (s > e - 1) {\n                s = (s - e);\n            }\n            var _loop_2 = function (u) {\n                var v = this_2.a8(r, s, u, d);\n                if (v >= 0) {\n                    q.add(this_2.ay._inner[v]);\n                    this_2.ay.removeAt(v);\n                }\n                else {\n                    q.add(((function () {\n                        var $ret = new Tile();\n                        $ret.c = r;\n                        $ret.d = s;\n                        $ret.e = u;\n                        $ret.f = d;\n                        return $ret;\n                    })()));\n                }\n            };\n            var this_2 = this;\n            for (var u = l; u < m; ++u) {\n                _loop_2(u);\n            }\n        }\n        this.ap.f = true;\n        this.cb();\n        this.ay = q;\n        var _loop_3 = function (w) {\n            if (this_3.ay._inner[w].i == null) {\n                this_3.ay._inner[w].i = this_3.ap.a();\n                this_3.ay._inner[w].i._opacity = 1;\n                this_3.an.am(this_3.ay._inner[w].i);\n                var x = this_3.am(this_3.ay._inner[w]);\n                if (x != null) {\n                    this_3.ay._inner[w].i.ac = x;\n                }\n                else {\n                    var y = null;\n                    var z = ((function () {\n                        var $ret = new Tile();\n                        $ret.d = _this.ay._inner[w].d;\n                        $ret.e = _this.ay._inner[w].e;\n                        $ret.f = _this.ay._inner[w].f;\n                        return $ret;\n                    })());\n                    while (z.f >= 0 && y == null) {\n                        z.d = z.d >> 1;\n                        z.e = z.e >> 1;\n                        z.f = z.f - 1;\n                        y = this_3.am(z);\n                    }\n                    if (y != null) {\n                        var aa = truncate(Math.pow(2, this_3.ay._inner[w].f - z.f));\n                        var ab = intDivide(256, aa);\n                        var ac = ab * (this_3.ay._inner[w].d % aa);\n                        var ad = ab * (this_3.ay._inner[w].e % aa);\n                        this_3.ay._inner[w].h = this_3.ap.a();\n                        this_3.ay._inner[w].h._opacity = 1;\n                        this_3.an.an(this_3.ay._inner[w].h);\n                        x = this_3.an.a(ab, y, ac, ad);\n                        this_3.ay._inner[w].h.ac = x;\n                    }\n                    this_3.an.u(this_3.ay._inner[w]);\n                }\n            }\n            var ae = this_3.ao.r / p;\n            var af = this_3.ao.p / p;\n            var ag = (this_3.ay._inner[w].c - j + n) * ae;\n            var ah = (this_3.ay._inner[w].e - l + o) * af;\n            this_3.ay._inner[w].i.width = ae + 0.5;\n            this_3.ay._inner[w].i.height = af + 0.5;\n            this_3.an.ao(this_3.ay._inner[w].i, ag, ah);\n            if (this_3.ay._inner[w].h != null) {\n                this_3.ay._inner[w].h.width = ae + 0.5;\n                this_3.ay._inner[w].h.height = af + 0.5;\n                this_3.an.ao(this_3.ay._inner[w].h, ag, ah);\n            }\n        };\n        var this_3 = this;\n        for (var w = 0; w < this.ay.count; ++w) {\n            _loop_3(w);\n        }\n        this.ap.f = false;\n        this.an.aj();\n    };\n    XamMultiScaleImage.prototype.b5 = function () {\n        if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n            return;\n        }\n        if (this.aw) {\n            return;\n        }\n        this.aw = true;\n        this.an.s(runOn(this, this.b6));\n    };\n    XamMultiScaleImage.prototype.cb = function () {\n        for (var a = 0; a < this.ay.count; ++a) {\n            this.an.r(this.ay._inner[a]);\n            this.bp(this.ay._inner[a]);\n            if (this.ay._inner[a].i != null) {\n                this.ap.n(this.ay._inner[a].i);\n                this.ay._inner[a].i.ac = null;\n                this.ay._inner[a].i = null;\n            }\n        }\n    };\n    XamMultiScaleImage.prototype.b4 = function () {\n        this.ar.i();\n    };\n    XamMultiScaleImage.prototype.am = function (a) {\n        return this.ar.item(a);\n    };\n    XamMultiScaleImage.prototype.bo = function (a, b) {\n        this.ar.item(a, b);\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"ar\", {\n        get: function () {\n            return this.aq;\n        },\n        set: function (a) {\n            this.aq = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.au = function () {\n        return this.az.count != 0;\n    };\n    XamMultiScaleImage.prototype.bt = function () {\n        var a = true;\n        if (this.au()) {\n            a = false;\n        }\n        if (!this.an.d()) {\n            a = false;\n        }\n        if (a && !this.as) {\n            if (this.imageTilesReady != null) {\n                this.imageTilesReady(this, new EventArgs());\n            }\n        }\n        this.as = a;\n    };\n    XamMultiScaleImage.prototype.ca = function (a) {\n        if (a.h != null) {\n            a.b = dateNow();\n            this.az.add(a);\n            this.an.ap();\n        }\n        else {\n            this.bt();\n        }\n    };\n    XamMultiScaleImage.prototype.bp = function (a) {\n        if (a.h != null) {\n            this.ap.n(a.h);\n            a.h.ac = null;\n            a.h = null;\n            for (var b = 0; b < this.az.count; ++b) {\n                if (this.az._inner[b] == a) {\n                    this.az.removeAt(b);\n                    break;\n                }\n            }\n            if (this.az.count == 0) {\n                this.an.ar();\n            }\n        }\n    };\n    XamMultiScaleImage.prototype.br = function () {\n        var a = dateNow();\n        var b = 0.5;\n        for (var c = 0; c < this.az.count;) {\n            var d = a.getTime() - this.az._inner[c].b.getTime();\n            var e = d / 1000;\n            var f = (e) / b;\n            f = MathUtil.b(f, 0, 1);\n            this.az._inner[c].h._opacity = 1 - f;\n            if (f >= 1) {\n                this.ap.n(this.az._inner[c].h);\n                this.az._inner[c].h.ac = null;\n                this.az._inner[c].h = null;\n                this.az.removeAt(c);\n            }\n            else {\n                ++c;\n            }\n            this.an.x();\n        }\n        if (this.az.count == 0) {\n            this.an.ar();\n        }\n    };\n    XamMultiScaleImage.prototype.by = function () {\n        this.a2 = this.a5;\n        this.ck = this.cm;\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b0 = function (a) {\n        var b = a;\n        this.ag.j(b);\n        this.an.ae(a);\n    };\n    XamMultiScaleImage.prototype.b1 = function (a) {\n        this.an.ag(a);\n    };\n    XamMultiScaleImage.prototype.b2 = function (a) {\n        this.an.ah(a);\n    };\n    XamMultiScaleImage.prototype.b3 = function (a) {\n        this.an.ai(a);\n    };\n    XamMultiScaleImage.prototype.bw = function () {\n        if (this.imagesChanged != null) {\n            this.imagesChanged(this, new EventArgs());\n        }\n    };\n    XamMultiScaleImage.prototype.bq = function () {\n        this.aw = false;\n    };\n    XamMultiScaleImage.prototype.bv = function (a) {\n        if (this.downloadingImage != null) {\n            this.downloadingImage(this, a);\n        }\n    };\n    XamMultiScaleImage.prototype.bu = function (a) {\n        if (this.cancellingImage != null) {\n            this.cancellingImage(this, a);\n        }\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"a4\", {\n        get: function () {\n            return this.a1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.bz = function (a) {\n        this.a1 = a;\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"a9\", {\n        get: function () {\n            return this.ar.h;\n        },\n        set: function (a) {\n            var b = a != this.a9;\n            if (b) {\n                this.ar = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, a, new TilePositionComparer());\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.$t = markType(XamMultiScaleImage, 'XamMultiScaleImage', Control.$, [INotifyPropertyChanged_$type]);\n    XamMultiScaleImage.$$p = markDep(DependencyProperty, PropertyMetadata, XamMultiScaleImage, 'bx', ['IsHorizontalTileWrappingEnabled:av:cc', [0, false], 'Referer:bf:cd', [2, null], 'Source:ao:ce', [XamMultiScaleTileSource.$, null], 'SpringsEasingFunction:aj:cf', [IEasingFunction_$type, null], 'UserAgent:bj:cg', [2, null], 'UseSprings:ax:ch', [0, false], 'ViewportOrigin:cm:ci', [Point_$type, { $type: Point_$type, x: 0, y: 0 }], 'ViewportWidth:a5:cj', [1, 1]]);\n    return XamMultiScaleImage;\n}(Control));\nexport { XamMultiScaleImage };\n//# sourceMappingURL=XamMultiScaleImageView_combined.js.map\n"]},"metadata":{},"sourceType":"module"}